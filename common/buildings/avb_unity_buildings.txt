##################
# Unity buildings
##################

building_hypercomms_forum = {
	base_buildtime = @b3_time
	can_build = no

	category = unity

	building_sets = {
		government
		unity
	}

	potential = {
		exists = owner
		NOR = {
			has_modifier = slave_colony
			has_modifier = penal_colony
		}
		owner = {
			NOR = {
				is_gestalt = yes
				is_megacorp = yes
				is_memorialist_empire = yes
			}
		}
	}

	allow = {
		has_major_upgraded_capital = yes
	}

	destroy_trigger = {
		exists = owner
		OR = {
			has_modifier = slave_colony
			owner = {
				OR = {
					is_gestalt = yes
					is_megacorp = yes
					is_memorialist_empire = yes
				}
			}
		}
	}

	convert_to = {
		building_corporate_forum
		building_simulation_3
		building_galactic_memorial_3
		building_sensorium_3
		building_avatar_chamber_3
	}

	resources = {
		category = planet_buildings
		produces = {
			trigger = { exists = owner }
			unity = 3
			multiplier = owner.trigger:num_ascension_perks
		}
		cost = {
			minerals = @b3_minerals
		}
	}

	planet_modifier = {
		planet_jobs_unity_produces_mult = 0.15
		planet_civilians_unity_produces_add = 0.5
		planet_civilians_consumer_goods_upkeep_add = 0.25
	}

	triggered_desc = {
		text = building_hypercomms_forum_effect
	}

	triggered_desc = {
		text = job_civilian_ethics_effect
	}

	prerequisites = {
		"tech_hypercomms_forum"
	}

	ai_resource_production = {
		unity = 20
	}

	show_tech_unlock_if = {
		is_gestalt = no
		is_megacorp = no
		is_memorialist_empire = no
	}
	upgrades = {
		building_avb_monument_4
	}
}
building_avb_monument_4 = {
	base_buildtime = @avb_b4_time
	can_build = no

	category = unity

	building_sets = {
		government
		unity
	}
	potential = {
		exists = owner
		NOR = {	
			has_modifier = slave_colony	
			has_modifier = penal_colony	
		}
		owner = {
			NOR = {
				is_gestalt = yes
				is_megacorp = yes
				is_memorialist_empire = yes
			}
		}
	}

	allow = {
		has_fully_upgraded_capital = yes
	}

	destroy_trigger = {
		exists = owner
		OR = {
			has_modifier = slave_colony
			has_modifier = penal_colony
			owner = {
				OR = {
					is_gestalt = yes
					is_megacorp = yes
					is_memorialist_empire = yes
				}
			}
		}
	}

	convert_to = {
		building_avb_monument_corp_4
		building_avb_monument_hive_4
		building_avb_monument_machine_4
		building_avb_monument_memorial_4
		building_avb_avatar_chamber_4
	}

	resources = {
		category = planet_buildings
		produces = {
			trigger = { exists = owner }
			unity = 4
			multiplier = owner.trigger:num_ascension_perks
		}
		cost = {
			minerals = @avb_b4_minerals
		}
	}

	planet_modifier = {
		planet_jobs_unity_produces_mult = 0.20
		planet_civilians_unity_produces_add = 0.5
		planet_civilians_consumer_goods_upkeep_add = 0.25
	}
	triggered_desc = {
		text = building_avb_monument_effect_4
	}

	triggered_desc = {
		text = job_civilian_ethics_effect
	}

	prerequisites = {
		"tech_avb_monument_4"
	}

	show_tech_unlock_if = {
		is_gestalt = no
		is_megacorp = no
		is_memorialist_empire = no
	}
	upgrades = {
		building_avb_monument_5
	}
}
building_avb_monument_5 = {
	base_buildtime = @avb_b5_time
	can_build = no

	category = unity

	building_sets = {
		government
		unity
	}
	potential = {
		exists = owner
		NOR = {	
			has_modifier = slave_colony	
			has_modifier = penal_colony	
		}
		owner = {
			NOR = {
				is_gestalt = yes
				is_megacorp = yes
				is_memorialist_empire = yes
			}
		}
	}

	allow = {
		has_upgraded_capital_4 = yes
	}

	destroy_trigger = {
		exists = owner
		OR = {
			has_modifier = slave_colony
			has_modifier = penal_colony
			owner = {
				OR = {
					is_gestalt = yes
					is_megacorp = yes
					is_memorialist_empire = yes
				}
			}
		}
	}

	convert_to = {
		building_avb_monument_corp_5
		building_avb_monument_hive_5
		building_avb_monument_machine_5
		building_avb_monument_memorial_5
		building_avb_avatar_chamber_5
	}

	resources = {
		category = planet_buildings
		produces = {
			trigger = { exists = owner }
			unity = 5
			multiplier = owner.trigger:num_ascension_perks
		}
		cost = {
			minerals = @avb_b5_minerals
		}
	}

	planet_modifier = {
		planet_jobs_unity_produces_mult = 0.25
		planet_civilians_unity_produces_add = 0.5
		planet_civilians_consumer_goods_upkeep_add = 0.25
	}
	triggered_desc = {
		text = building_avb_monument_effect_5
	}

	triggered_desc = {
		text = job_civilian_ethics_effect
	}

	prerequisites = {
		"tech_avb_monument_5"
	}

	show_tech_unlock_if = {
		is_gestalt = no
		is_megacorp = no
		is_memorialist_empire = no
	}
	upgrades = {
		building_avb_monument_6
	}
}
building_avb_monument_6 = {
	base_buildtime = @avb_b6_time
	can_build = no

	category = unity

	building_sets = {
		government
		unity
	}
	potential = {
		exists = owner
		NOR = {	
			has_modifier = slave_colony	
			has_modifier = penal_colony	
		}
		owner = {
			NOR = {
				is_gestalt = yes
				is_megacorp = yes
				is_memorialist_empire = yes
			}
		}
	}

	allow = {
		has_upgraded_capital_5 = yes
	}

	destroy_trigger = {
		exists = owner
		OR = {
			has_modifier = slave_colony
			has_modifier = penal_colony
			owner = {
				OR = {
					is_gestalt = yes
					is_megacorp = yes
					is_memorialist_empire = yes
				}
			}
		}
	}

	convert_to = {
		building_avb_monument_corp_6
		building_avb_monument_hive_6
		building_avb_monument_machine_6
		building_avb_monument_memorial_6
		building_avb_avatar_chamber_6
	}

	resources = {
		category = planet_buildings
		produces = {
			trigger = { exists = owner }
			unity = 6
			multiplier = owner.trigger:num_ascension_perks
		}
		cost = {
			minerals = @avb_b6_minerals
		}
	}

	planet_modifier = {
		planet_jobs_unity_produces_mult = 0.3
		planet_civilians_unity_produces_add = 0.5
		planet_civilians_consumer_goods_upkeep_add = 0.25
	}

	triggered_desc = {
		text = building_avb_monument_effect_6
	}

	triggered_desc = {
		text = job_civilian_ethics_effect
	}

	prerequisites = {
		"tech_avb_monument_6"
	}

	show_tech_unlock_if = {
		is_gestalt = no
		is_megacorp = no
		is_memorialist_empire = no
	}
}

##################
# Bureaucrats
##################
building_bureaucratic_3 = {
	base_buildtime = @b3_time
	planet_limit = 1
	category = unity

	building_sets = {
		unity
	}

	potential = {
		exists = owner
		owner = {
			is_regular_empire = yes
			is_spiritualist = no
			has_make_spiritualist_perk = no
		}
		NOR = {
			has_modifier = slave_colony
			has_modifier = resort_colony
		}
	}

	allow = {
	}

	destroy_trigger = {
		exists = owner
		owner = {
			OR = {
				is_regular_empire = no
				is_spiritualist = yes
				has_make_spiritualist_perk = yes
			}
		}
	}

	convert_to = {
		building_sacred_nexus
		building_hive_confluence
		building_system_conflux
	}

	resources = {
		category = planet_buildings
		cost = {
			minerals = @b3_minerals
			rare_crystals = @b3_rare_cost
		}
		upkeep = {
			energy = @b3_upkeep
			rare_crystals = @b3_rare_upkeep
		}
	}

	planet_modifier = {
		pop_bureaucrat_bonus_workforce_mult = 0.15
	}

	inline_script = buildings/job_high_priest_variants_add_saintly_hierarchy

	prerequisites = {
		"tech_galactic_bureaucracy"
	}

	show_tech_unlock_if = {
		is_regular_empire = yes
		is_spiritualist = no
		has_make_spiritualist_perk = no
	}
	upgrades = {
		"building_avb_bureaucratic_4"
	}
}
building_avb_bureaucratic_4 = {
	base_buildtime = @avb_b4_time
	planet_limit = 1
	category = unity

	building_sets = {
		unity
	}

	potential = {
		exists = owner
		owner = {
			is_regular_empire = yes
			is_spiritualist = no
			has_make_spiritualist_perk = no
		}
		NOR = {
			has_modifier = slave_colony
			has_modifier = resort_colony
		}
	}

	allow = {
		has_major_upgraded_capital = yes
	}

	destroy_trigger = {
		exists = owner
		owner = {
			OR = {
				is_regular_empire = no
				is_spiritualist = yes
				has_make_spiritualist_perk = yes
			}
		}
	}

	convert_to = {
		building_avb_temple_4
		building_avb_machine_unity_4
		building_avb_hive_unity_4
		building_avb_death_temple_4
	}

	resources = {
		category = planet_buildings
		cost = {
			minerals = @avb_b4_minerals
			rare_crystals = @avb_b4_rare_cost
		}
		upkeep = {
			energy = @avb_b4_upkeep
			rare_crystals = @avb_b4_rare_upkeep
		}
	}

	planet_modifier = {
		pop_bureaucrat_bonus_workforce_mult = 0.2
	}

	inline_script = buildings/job_high_priest_variants_add_saintly_hierarchy

	prerequisites = {
		"tech_avb_bureaucratic_4"
	}

	show_tech_unlock_if = {
		is_regular_empire = yes
		is_spiritualist = no
		has_make_spiritualist_perk = no
	}
	upgrades = {
		"building_avb_bureaucratic_5"
	}
}
building_avb_bureaucratic_5 = {
	base_buildtime = @avb_b5_time
	planet_limit = 1
	category = unity

	building_sets = {
		unity
	}

	potential = {
		exists = owner
		owner = {
			is_regular_empire = yes
			is_spiritualist = no
			has_make_spiritualist_perk = no
		}
		NOR = {
			has_modifier = slave_colony
			has_modifier = resort_colony
		}
	}

	allow = {
		has_fully_upgraded_capital = yes
	}

	destroy_trigger = {
		exists = owner
		owner = {
			OR = {
				is_regular_empire = no
				is_spiritualist = yes
				has_make_spiritualist_perk = yes
			}
		}
	}

	convert_to = {
		building_avb_temple_5
		building_avb_machine_unity_5
		building_avb_hive_unity_5
		building_avb_death_temple_5
	}

	resources = {
		category = planet_buildings
		cost = {
			minerals = @avb_b5_minerals
			rare_crystals = @avb_b5_rare_cost
		}
		upkeep = {
			energy = @avb_b5_upkeep
			rare_crystals = @avb_b5_rare_upkeep
		}
	}

	planet_modifier = {
		pop_bureaucrat_bonus_workforce_mult = 0.25
	}

	inline_script = buildings/job_high_priest_variants_add_saintly_hierarchy

	prerequisites = {
		"tech_avb_bureaucratic_5"
	}

	show_tech_unlock_if = {
		is_regular_empire = yes
		is_spiritualist = no
		has_make_spiritualist_perk = no
	}
	upgrades = {
		"building_avb_bureaucratic_6"
	}
}
building_avb_bureaucratic_6 = {
	base_buildtime = @avb_b6_time
	planet_limit = 1
	category = unity

	building_sets = {
		unity
	}

	potential = {
		exists = owner
		owner = {
			is_regular_empire = yes
			is_spiritualist = no
			has_make_spiritualist_perk = no
		}
		NOR = {
			has_modifier = slave_colony
			has_modifier = resort_colony
		}
	}

	allow = {
		has_upgraded_capital_4 = yes
	}

	destroy_trigger = {
		exists = owner
		owner = {
			OR = {
				is_regular_empire = no
				is_spiritualist = yes
				has_make_spiritualist_perk = yes
			}
		}
	}

	convert_to = {
		building_avb_temple_6
		building_avb_machine_unity_6
		building_avb_hive_unity_6
		building_avb_death_temple_6
	}

	resources = {
		category = planet_buildings
		cost = {
			minerals = @avb_b6_minerals
			rare_crystals = @avb_b6_rare_cost
		}
		upkeep = {
			energy = @avb_b6_upkeep
			rare_crystals = @avb_b6_rare_upkeep
		}
	}

	planet_modifier = {
		pop_bureaucrat_bonus_workforce_mult = 0.3
	}

	inline_script = buildings/job_high_priest_variants_add_saintly_hierarchy

	prerequisites = {
		"tech_avb_bureaucratic_6"
	}

	show_tech_unlock_if = {
		is_regular_empire = yes
		is_spiritualist = no
		has_make_spiritualist_perk = no
	}
}
##################
# Spiritualists
##################
building_sacred_nexus = {
	base_buildtime = @b3_time
	planet_limit = 1
	category = unity

	building_sets = {
		unity
	}

	potential = {
		exists = owner
		owner = {
			OR = {
				is_spiritualist = yes
				AND = {
					is_gestalt = no
					has_make_spiritualist_perk = yes
				}
			}
		}
		NOT = { has_modifier = slave_colony }
	}

	allow = {
	}

	destroy_trigger = {
		exists = owner
		OR = {
			owner = {
				OR = {
					AND = {
						is_spiritualist = no
						has_make_spiritualist_perk = no
					}
					is_gestalt = yes
				}
			}
			has_modifier = slave_colony
		}
	}

	convert_to = {
		building_bureaucratic_3
		building_hive_confluence
		building_system_conflux
	}

	resources = {
		category = planet_buildings
		cost = {
			minerals = @b3_minerals
			rare_crystals = @b3_rare_cost
		}
		upkeep = {
			energy = @b3_upkeep
			rare_crystals = @b3_rare_upkeep
		}
	}

	planet_modifier = {
		pop_ethic_spiritualist_attraction_mult = 0.15
		pop_bureaucrat_bonus_workforce_mult = 0.15
	}


	prerequisites = {
		"tech_consecration_fields"
	}

	show_tech_unlock_if = {
		OR = {
			is_spiritualist = yes
			AND = {
				is_gestalt = no
				has_make_spiritualist_perk = yes
			}
		}
	}
	upgrades = {
		"building_avb_temple_4"
	}
}
building_avb_temple_4 = {
	base_buildtime = @avb_b4_time
	planet_limit = 1
	category = unity

	building_sets = {
		unity
	}

	potential = {
		exists = owner
		owner = {
			OR = {
				is_spiritualist = yes
				AND = {
					is_gestalt = no
					has_make_spiritualist_perk = yes
				}
			}
		}
		NOT = { has_modifier = slave_colony }
	}

	allow = {
		has_fully_upgraded_capital = yes
	}

	destroy_trigger = {
		exists = owner
		OR = {
			owner = {
				OR = {
					AND = {
						is_spiritualist = no
						has_make_spiritualist_perk = no
					}
					is_gestalt = yes
				}
			}
			has_modifier = slave_colony
		}
	}

	convert_to = {
		building_avb_bureaucratic_4
		building_avb_machine_unity_4
		building_avb_hive_unity_4
		building_avb_death_temple_4
	}

	resources = {
		category = planet_buildings
		cost = {
			minerals = @avb_b4_minerals
			rare_crystals = @avb_b4_rare_cost
		}
		upkeep = {
			energy = @avb_b4_upkeep
			rare_crystals = @avb_b4_rare_upkeep
		}
	}

	planet_modifier = {
		pop_ethic_spiritualist_attraction_mult = 0.2
		pop_bureaucrat_bonus_workforce_mult = 0.2
	}


	prerequisites = {
		"tech_avb_temple_4"
	}

	show_tech_unlock_if = {
		OR = {
			is_spiritualist = yes
			AND = {
				is_gestalt = no
				has_make_spiritualist_perk = yes
			}
		}
	}
	upgrades = {
		"building_avb_temple_5"
	}
}

building_avb_temple_5 = {
	base_buildtime = @avb_b5_time
	planet_limit = 1
	category = unity

	building_sets = {
		unity
	}

	potential = {
		exists = owner
		owner = {
			OR = {
				is_spiritualist = yes
				AND = {
					is_gestalt = no
					has_make_spiritualist_perk = yes
				}
			}
		}
		NOT = { has_modifier = slave_colony }
	}

	allow = {
		has_fully_upgraded_capital = yes
	}

	destroy_trigger = {
		exists = owner
		OR = {
			owner = {
				OR = {
					AND = {
						is_spiritualist = no
						has_make_spiritualist_perk = no
					}
					is_gestalt = yes
				}
			}
			has_modifier = slave_colony
		}
	}

	convert_to = {
		building_avb_bureaucratic_4
		building_avb_machine_unity_4
		building_avb_hive_unity_4
		building_avb_death_temple_4
	}

	resources = {
		category = planet_buildings
		cost = {
			minerals = @avb_b5_minerals
			rare_crystals = @avb_b5_rare_cost
		}
		upkeep = {
			energy = @avb_b5_upkeep
			rare_crystals = @avb_b5_rare_upkeep
		}
	}

	planet_modifier = {
		pop_ethic_spiritualist_attraction_mult = 0.25
		pop_bureaucrat_bonus_workforce_mult = 0.25
	}


	prerequisites = {
		"tech_avb_temple_5"
	}

	show_tech_unlock_if = {
		OR = {
			is_spiritualist = yes
			AND = {
				is_gestalt = no
				has_make_spiritualist_perk = yes
			}
		}
	}
	upgrades = {
		"building_avb_temple_6"
	}
}
building_avb_temple_6 = {
	base_buildtime = @avb_b6_time
	planet_limit = 1
	category = unity

	building_sets = {
		unity
	}

	potential = {
		exists = owner
		owner = {
			OR = {
				is_spiritualist = yes
				AND = {
					is_gestalt = no
					has_make_spiritualist_perk = yes
				}
			}
		}
		NOT = { has_modifier = slave_colony }
	}

	allow = {
		has_fully_upgraded_capital = yes
	}

	destroy_trigger = {
		exists = owner
		OR = {
			owner = {
				OR = {
					AND = {
						is_spiritualist = no
						has_make_spiritualist_perk = no
					}
					is_gestalt = yes
				}
			}
			has_modifier = slave_colony
		}
	}

	convert_to = {
		building_avb_bureaucratic_6
		building_avb_machine_unity_6
		building_avb_hive_unity_6
		building_avb_death_temple_6
	}

	resources = {
		category = planet_buildings
		cost = {
			minerals = @avb_b6_minerals
			rare_crystals = @avb_b6_rare_cost
		}
		upkeep = {
			energy = @avb_b6_upkeep
			rare_crystals = @avb_b6_rare_upkeep
		}
	}

	planet_modifier = {
		pop_ethic_spiritualist_attraction_mult = 0.3
		pop_bureaucrat_bonus_workforce_mult = 0.3
	}


	prerequisites = {
		"tech_avb_temple_6"
	}

	show_tech_unlock_if = {
		OR = {
			is_spiritualist = yes
			AND = {
				is_gestalt = no
				has_make_spiritualist_perk = yes
			}
		}
	}
}
##################
# Machine
##################
building_system_conflux = {
	base_buildtime = @b3_time
	icon = building_hypercomms_forum
	planet_limit = 1
	category = unity
	can_build = no

	building_sets = {
		unity
	}

	potential = {
		exists = owner
		owner = {
			is_machine_empire = yes
			NOT = {
				has_valid_civic = civic_machine_servitor
			}
		}
	}

	allow = {
		has_upgraded_capital = yes
	}

	destroy_trigger = {
		exists = owner
		owner = {
			OR = {
				is_machine_empire = no
				has_valid_civic = civic_machine_servitor
			}
		}
	}

	convert_to = {
		building_bureaucratic_3
		building_sacred_nexus
		building_hive_confluence
	}

	resources = {
		category = planet_buildings
		cost = {
			minerals = @b3_minerals
			rare_crystals = @b3_rare_cost
		}
		upkeep = {
			energy = @b3_upkeep
			rare_crystals = @b3_rare_upkeep
		}
	}

	planet_modifier = {
		pop_coordinator_bonus_workforce_mult = 0.15
	}

	prerequisites = {
		"tech_galactic_bureaucracy"
	}

	show_tech_unlock_if = {
		is_machine_empire = yes
		NOT = {
			has_valid_civic = civic_machine_servitor
		}
	}
	upgrades = {
		building_avb_machine_unity_4
	}
}
building_avb_machine_unity_4 = {
	base_buildtime = @avb_b4_time
	icon = building_avb_monument_4
	planet_limit = 1
	category = unity
	can_build = no

	building_sets = {
		unity
	}

	potential = {
		exists = owner
		owner = {
			is_machine_empire = yes
			NOT = {
				has_valid_civic = civic_machine_servitor
			}
		}
	}

	allow = {
		has_major_upgraded_capital = yes
	}

	destroy_trigger = {
		exists = owner
		owner = {
			OR = {
				is_machine_empire = no
				has_valid_civic = civic_machine_servitor
			}
		}
	}

	convert_to = {
		building_avb_bureaucratic_4
		building_avb_temple_4
		building_avb_hive_unity_4
		building_avb_death_temple_4
	}

	resources = {
		category = planet_buildings
		cost = {
			minerals = @avb_b4_minerals
			rare_crystals = @avb_b4_rare_cost
		}
		upkeep = {
			energy = @avb_b4_upkeep
			rare_crystals = @avb_b4_rare_upkeep
		}
	}

	planet_modifier = {
		pop_coordinator_bonus_workforce_mult = 0.2
	}

	prerequisites = {
		"tech_avb_bureaucratic_4"
	}

	show_tech_unlock_if = {
		is_machine_empire = yes
		NOT = {
			has_valid_civic = civic_machine_servitor
		}
	}
	upgrades = {
		building_avb_machine_unity_5
	}
}
building_avb_machine_unity_5 = {
	base_buildtime = @avb_b5_time
	icon = building_avb_monument_5
	planet_limit = 1
	category = unity
	can_build = no

	building_sets = {
		unity
	}

	potential = {
		exists = owner
		owner = {
			is_machine_empire = yes
			NOT = {
				has_valid_civic = civic_machine_servitor
			}
		}
	}

	allow = {
		has_fully_upgraded_capital = yes
	}

	destroy_trigger = {
		exists = owner
		owner = {
			OR = {
				is_machine_empire = no
				has_valid_civic = civic_machine_servitor
			}
		}
	}

	convert_to = {
		building_avb_bureaucratic_5
		building_avb_temple_5
		building_avb_hive_unity_5
		building_avb_death_temple_5
	}

	resources = {
		category = planet_buildings
		cost = {
			minerals = @avb_b5_minerals
			rare_crystals = @avb_b5_rare_cost
		}
		upkeep = {
			energy = @avb_b5_upkeep
			rare_crystals = @avb_b5_rare_upkeep
		}
	}

	planet_modifier = {
		pop_coordinator_bonus_workforce_mult = 0.25
	}

	prerequisites = {
		"tech_avb_bureaucratic_5"
	}

	show_tech_unlock_if = {
		is_machine_empire = yes
		NOT = {
			has_valid_civic = civic_machine_servitor
		}
	}
	upgrades = {
		building_avb_machine_unity_6
	}
}
building_avb_machine_unity_6 = {
	base_buildtime = @avb_b6_time
	icon = building_avb_monument_6
	planet_limit = 1
	category = unity
	can_build = no

	building_sets = {
		unity
	}

	potential = {
		exists = owner
		owner = {
			is_machine_empire = yes
			NOT = {
				has_valid_civic = civic_machine_servitor
			}
		}
	}

	allow = {
		has_upgraded_capital_4 = yes
	}

	destroy_trigger = {
		exists = owner
		owner = {
			OR = {
				is_machine_empire = no
				has_valid_civic = civic_machine_servitor
			}
		}
	}

	convert_to = {
		building_avb_bureaucratic_6
		building_avb_temple_6
		building_avb_hive_unity_6
		building_avb_death_temple_6
	}

	resources = {
		category = planet_buildings
		cost = {
			minerals = @avb_b6_minerals
			rare_crystals = @avb_b6_rare_cost
		}
		upkeep = {
			energy = @avb_b6_upkeep
			rare_crystals = @avb_b6_rare_upkeep
		}
	}

	planet_modifier = {
		pop_coordinator_bonus_workforce_mult = 0.3
	}

	prerequisites = {
		"tech_avb_bureaucratic_6"
	}

	show_tech_unlock_if = {
		is_machine_empire = yes
		NOT = {
			has_valid_civic = civic_machine_servitor
		}
	}
}

##################
# Hive Minds
##################
building_hive_confluence = {
	base_buildtime = @b3_time
	planet_limit = 1
	category = unity

	building_sets = {
		unity
	}

	potential = {
		exists = owner
		owner = {
			is_hive_empire = yes
			is_wilderness_empire = no
		}
	}
	allow = {
		has_major_upgraded_capital = yes
	}
	destroy_trigger = {
		exists = owner
		owner = {
			OR = {
				is_hive_empire = no
				is_wilderness_empire = yes
			}
		}
	}
	convert_to = {
		building_bureaucratic_3
		building_sacred_nexus
		building_commensal_clearing_4
		building_system_conflux
	}

	resources = {
		category = planet_buildings
		cost = {
			minerals = @b3_minerals
			exotic_gases = @b3_rare_cost
		}
		upkeep = {
			energy = @b3_upkeep
			exotic_gases = @b3_rare_upkeep
		}
		upkeep = {
			trigger = {
				exists = owner
				owner = {
					has_edict = synaptic_reinforcement
				}
			}
			energy = 2
		}
	}

	planet_modifier = {}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				has_active_tradition = tr_domination_synaptic_extensions
			}
		}
		modifier = {
			planet_housing_add = 200
		}
	}

	planet_modifier = {
		pop_coordinator_bonus_workforce_mult = 0.15

	}

	prerequisites = {
		"tech_hive_confluence"
	}
	show_tech_unlock_if = {
		is_wilderness_empire = no
	}
	upgrades = {
		"building_avb_hive_unity_4"
	}
}
building_avb_hive_unity_4 = {
	base_buildtime = @avb_b4_time
	planet_limit = 1
	category = unity

	building_sets = {
		unity
	}

	potential = {
		exists = owner
		owner = {
			is_hive_empire = yes
			is_wilderness_empire = no
		}
	}
	allow = {
		has_fully_upgraded_capital = yes
	}
	destroy_trigger = {
		exists = owner
		owner = {
			OR = {
				is_hive_empire = no
				is_wilderness_empire = yes
			}
		}
	}
	convert_to = {
		building_avb_bureaucratic_4
		building_avb_temple_4
		building_avb_machine_unity_4
		building_avb_death_temple_4
	}

	resources = {
		category = planet_buildings
		cost = {
			minerals = @avb_b4_minerals
			exotic_gases = @avb_b4_rare_cost
		}
		upkeep = {
			energy = @avb_b4_upkeep
			exotic_gases = @avb_b4_rare_upkeep
		}
		upkeep = {
			trigger = {
				exists = owner
				owner = {
					has_edict = synaptic_reinforcement
				}
			}
			energy = 2
		}
	}

	planet_modifier = {}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				has_active_tradition = tr_domination_synaptic_extensions
			}
		}
		modifier = {
			planet_housing_add = 200
		}
	}

	planet_modifier = {
		pop_coordinator_bonus_workforce_mult = 0.2

	}

	prerequisites = {
		"tech_avb_hive_unity_4"
	}
	show_tech_unlock_if = {
		is_wilderness_empire = no
	}
	upgrades = {
		"building_avb_hive_unity_5"
	}
}
building_avb_hive_unity_5 = {
	base_buildtime = @avb_b5_time
	planet_limit = 1
	category = unity

	building_sets = {
		unity
	}

	potential = {
		exists = owner
		owner = {
			is_hive_empire = yes
			is_wilderness_empire = no
		}
	}
	allow = {
		has_upgraded_capital_4 = yes
	}
	destroy_trigger = {
		exists = owner
		owner = {
			OR = {
				is_hive_empire = no
				is_wilderness_empire = yes
			}
		}
	}
	convert_to = {
		building_avb_bureaucratic_5
		building_avb_temple_5
		building_avb_machine_unity_5
		building_avb_death_temple_5
	}

	resources = {
		category = planet_buildings
		cost = {
			minerals = @avb_b5_minerals
			exotic_gases = @avb_b5_rare_cost
		}
		upkeep = {
			energy = @avb_b5_upkeep
			exotic_gases = @avb_b5_rare_upkeep
		}
		upkeep = {
			trigger = {
				exists = owner
				owner = {
					has_edict = synaptic_reinforcement
				}
			}
			energy = 2
		}
	}

	planet_modifier = {}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				has_active_tradition = tr_domination_synaptic_extensions
			}
		}
		modifier = {
			planet_housing_add = 200
		}
	}

	planet_modifier = {
		pop_coordinator_bonus_workforce_mult = 0.25

	}

	prerequisites = {
		"tech_avb_hive_unity_5"
	}
	show_tech_unlock_if = {
		is_wilderness_empire = no
	}
	upgrades = {
		"building_avb_hive_unity_6"
	}
}
building_avb_hive_unity_6 = {
	base_buildtime = @avb_b6_time
	planet_limit = 1
	category = unity

	building_sets = {
		unity
	}

	potential = {
		exists = owner
		owner = {
			is_hive_empire = yes
			is_wilderness_empire = no
		}
	}
	allow = {
		has_upgraded_capital_5 = yes
	}
	destroy_trigger = {
		exists = owner
		owner = {
			OR = {
				is_hive_empire = no
				is_wilderness_empire = yes
			}
		}
	}
	convert_to = {
		building_avb_bureaucratic_6
		building_avb_temple_6
		building_avb_machine_unity_6
		building_avb_death_temple_6
	}

	resources = {
		category = planet_buildings
		cost = {
			minerals = @avb_b6_minerals
			exotic_gases = @avb_b6_rare_cost
		}
		upkeep = {
			energy = @avb_b6_upkeep
			exotic_gases = @avb_b6_rare_upkeep
		}
		upkeep = {
			trigger = {
				exists = owner
				owner = {
					has_edict = synaptic_reinforcement
				}
			}
			energy = 2
		}
	}

	planet_modifier = {}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				has_active_tradition = tr_domination_synaptic_extensions
			}
		}
		modifier = {
			planet_housing_add = 200
		}
	}

	planet_modifier = {
		pop_coordinator_bonus_workforce_mult = 0.3

	}

	prerequisites = {
		"tech_avb_hive_unity_6"
	}
	show_tech_unlock_if = {
		is_wilderness_empire = no
	}
}

##################
# Death Cult
##################

# Temple of Grand Sacrifice
building_sacrificial_temple_3 = {
	base_buildtime = @b3_time
	position_priority = 100
	planet_limit = 1
	category = unity

	building_sets = {
		unity
	}

	potential = {
		exists = owner
		owner = {
			is_death_cult_empire = yes
		}
		NOT = { has_modifier = slave_colony }
	}

	allow = {
	}

	destroy_trigger = {
		exists = owner
		OR = {
			owner = { is_death_cult_empire = no }
			has_modifier = slave_colony
		}
	}

	convert_to = {
		building_bureaucratic_3
		building_sacred_nexus
		building_system_conflux
		building_hive_confluence
	}

	resources = {
		category = planet_buildings
		cost = {
			minerals = @b3_minerals
			exotic_gases = @b3_rare_cost
		}
		upkeep = {
			energy = @b3_upkeep
			exotic_gases = @b3_rare_upkeep
		}
	}

	planet_modifier = {
		pop_ethic_spiritualist_attraction_mult = 0.15
		pop_mortal_initiate_bonus_workforce_mult = 0.15
	}

	inline_script = {
		script = jobs/mortal_initiates_add
		AMOUNT = @building_static_jobs_high
	}

	prerequisites = {
		"tech_consecration_fields"
	}

	show_tech_unlock_if = {
		is_death_cult_empire = yes
	}
	upgrades = {
		"building_avb_death_temple_4"
	}
}
building_avb_death_temple_4 = {
	base_buildtime = @avb_b4_time
	position_priority = 100
	planet_limit = 1
	category = unity

	building_sets = {
		unity
	}

	potential = {
		exists = owner
		owner = {
			is_death_cult_empire = yes
		}
		NOT = { has_modifier = slave_colony }
	}

	allow = {
	}

	destroy_trigger = {
		exists = owner
		OR = {
			owner = { is_death_cult_empire = no }
			has_modifier = slave_colony
		}
	}

	convert_to = {
		building_avb_bureaucratic_4
		building_avb_temple_4
		building_avb_machine_unity_4
		building_avb_hive_unity_4
	}

	resources = {
		category = planet_buildings
		cost = {
			minerals = @avb_b4_minerals
			exotic_gases = @avb_b4_rare_cost
		}
		upkeep = {
			energy = @avb_b4_upkeep
			exotic_gases = @avb_b4_rare_upkeep
		}
	}

	planet_modifier = {
		pop_ethic_spiritualist_attraction_mult = 0.2
		pop_mortal_initiate_bonus_workforce_mult = 0.2
	}

	inline_script = {
		script = jobs/mortal_initiates_add
		AMOUNT = 800
	}

	prerequisites = {
		"tech_avb_temple_4"
	}

	show_tech_unlock_if = {
		is_death_cult_empire = yes
	}
	upgrades = {
		"building_avb_death_temple_5"
	}
}
building_avb_death_temple_5 = {
	base_buildtime = @avb_b5_time
	position_priority = 100
	planet_limit = 1
	category = unity

	building_sets = {
		unity
	}

	potential = {
		exists = owner
		owner = {
			is_death_cult_empire = yes
		}
		NOT = { has_modifier = slave_colony }
	}

	allow = {
	}

	destroy_trigger = {
		exists = owner
		OR = {
			owner = { is_death_cult_empire = no }
			has_modifier = slave_colony
		}
	}

	convert_to = {
		building_avb_bureaucratic_5
		building_avb_temple_5
		building_avb_machine_unity_5
		building_avb_hive_unity_5
	}

	resources = {
		category = planet_buildings
		cost = {
			minerals = @avb_b5_minerals
			exotic_gases = @avb_b5_rare_cost
		}
		upkeep = {
			energy = @avb_b5_upkeep
			exotic_gases = @avb_b5_rare_upkeep
		}
	}

	planet_modifier = {
		pop_ethic_spiritualist_attraction_mult = 0.25
		pop_mortal_initiate_bonus_workforce_mult = 0.25
	}

	inline_script = {
		script = jobs/mortal_initiates_add
		AMOUNT = 1000
	}

	prerequisites = {
		"tech_avb_temple_5"
	}

	show_tech_unlock_if = {
		is_death_cult_empire = yes
	}
	upgrades = {
		"building_avb_death_temple_6"
	}
}
building_avb_death_temple_5 = {
	base_buildtime = @avb_b6_time
	position_priority = 100
	planet_limit = 1
	category = unity

	building_sets = {
		unity
	}

	potential = {
		exists = owner
		owner = {
			is_death_cult_empire = yes
		}
		NOT = { has_modifier = slave_colony }
	}

	allow = {
	}

	destroy_trigger = {
		exists = owner
		OR = {
			owner = { is_death_cult_empire = no }
			has_modifier = slave_colony
		}
	}

	convert_to = {
		building_avb_bureaucratic_6
		building_avb_temple_6
		building_avb_machine_unity_6
		building_avb_hive_unity_6
	}

	resources = {
		category = planet_buildings
		cost = {
			minerals = @avb_b6_minerals
			exotic_gases = @avb_b6_rare_cost
		}
		upkeep = {
			energy = @avb_b6_upkeep
			exotic_gases = @avb_b6_rare_upkeep
		}
	}

	planet_modifier = {
		pop_ethic_spiritualist_attraction_mult = 0.3
		pop_mortal_initiate_bonus_workforce_mult = 0.3
	}

	inline_script = {
		script = jobs/mortal_initiates_add
		AMOUNT = 1200
	}

	prerequisites = {
		"tech_avb_temple_6"
	}

	show_tech_unlock_if = {
		is_death_cult_empire = yes
	}
}

##################
# Memorialists
##################

#Galactic Memorial
building_galactic_memorial_3 = {
	base_buildtime = @b3_time
	can_build = no
	category = unity

	building_sets = {
		government
		unity
	}

	potential = {
		exists = owner
		NOT = { has_modifier = slave_colony }
		owner = {
			is_memorialist_empire = yes
		}
	}

	allow = {
		has_major_upgraded_capital = yes
	}

	destroy_trigger = {
		exists = owner
		OR = {
			has_modifier = slave_colony
			owner = { is_memorialist_empire = no }
		}
	}

	convert_to = {
		building_hypercomms_forum
		building_corporate_forum
		building_simulation_3
		building_sensorium_3
		building_avatar_chamber_3
	}

	resources = {
		category = planet_buildings
		produces = {
			trigger = { exists = owner }
			unity = 3
			multiplier = owner.trigger:num_ascension_perks
		}
		cost = {
			minerals = @b3_minerals
			exotic_gases = @b3_rare_cost
		}
		upkeep = {
			minerals = @b3_upkeep
			exotic_gases = @b3_rare_upkeep
		}
	}

	planet_modifier = {
		planet_jobs_unity_produces_mult = 0.15
		planet_bureaucrats_upkeep_mult = -0.15
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_regular_empire = yes
			}
		}
		planet_civilians_unity_produces_add = 0.5
		planet_civilians_consumer_goods_upkeep_add = 0.25
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_gestalt = yes
			}
		}
		planet_maintenance_drones_unity_produces_add = 0.50
		planet_maintenance_drones_trade_produces_add = 0.50
		planet_maintenance_drones_minerals_upkeep_add = 0.25
	}

	triggered_desc = {
		text = building_hypercomms_forum_effect
	}

	triggered_desc = {
		trigger = {
			exists = owner
			owner = {
				is_regular_empire = yes
			}
		}
		text = job_civilian_ethics_effect
	}

	prerequisites = {
		"tech_hypercomms_forum"
	}

	#Tomb/Relic worlds
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_gestalt = no }
			OR = {
				is_planet_class = pc_nuked
				is_planet_class = pc_relic
			}
		}
		pop_government_ethic_attraction = 0.20
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_gestalt = yes }
			OR = {
				is_planet_class = pc_nuked
				is_planet_class = pc_relic
			}
		}
		planet_crime_no_happiness_add = -20
	}

	show_tech_unlock_if = {
		is_memorialist_empire = yes
	}

	ai_resource_production = {
		unity = 20
	}
	upgrades = {
		building_avb_monument_memorial_4
	}
}
building_avb_monument_memorial_4 = {
	base_buildtime = @avb_b4_time
	can_build = no
	category = unity

	building_sets = {
		government
		unity
	}
	potential = {
		exists = owner
		NOT = { has_modifier = slave_colony }
		owner = {
			is_memorialist_empire = yes
		}
	}

	allow = {
		has_fully_upgraded_capital = yes
	}

	destroy_trigger = {
		exists = owner
		OR = {
			has_modifier = slave_colony
			owner = { is_memorialist_empire = no }
		}
	}

	convert_to = {
		building_avb_monument_corp_4
		building_avb_monument_hive_4
		building_avb_monument_machine_4
		building_avb_monument_4
	}

	resources = {
		category = planet_buildings
		produces = {
			trigger = { exists = owner }
			unity = 4
			multiplier = owner.trigger:num_ascension_perks
		}
		cost = {
			minerals = @avb_b4_minerals
			exotic_gases = @avb_b4_rare_cost
		}
		upkeep = {
			minerals = @avb_b4_upkeep
			exotic_gases = @avb_b4_rare_upkeep
		}
	}

	triggered_desc = {
		text = building_avb_monument_effect_5
	}
	planet_modifier = {
		planet_jobs_unity_produces_mult = 0.2
		planet_bureaucrats_upkeep_mult = -0.2
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_regular_empire = yes
			}
		}
		planet_civilians_unity_produces_add = 0.5
		planet_civilians_consumer_goods_upkeep_add = 0.25
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_gestalt = yes
			}
		}
		planet_maintenance_drones_unity_produces_add = 0.50
		planet_maintenance_drones_trade_produces_add = 0.50
		planet_maintenance_drones_minerals_upkeep_add = 0.25
	}
	#Tomb/Relic worlds
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_gestalt = no }
			OR = {
				is_planet_class = pc_nuked
				is_planet_class = pc_relic
			}
		}
		pop_government_ethic_attraction = 0.20
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_gestalt = yes }
			OR = {
				is_planet_class = pc_nuked
				is_planet_class = pc_relic
			}
		}
		planet_crime_no_happiness_add = -20
	}
	prerequisites = {
		"tech_avb_monument_4"
	}

	show_tech_unlock_if = {
		is_memorialist_empire = yes
	}
	upgrades = {
		building_avb_monument_memorial_5
	}
}
building_avb_monument_memorial_5 = {
	base_buildtime = @avb_b5_time
	can_build = no
	category = unity

	building_sets = {
		government
		unity
	}
	potential = {
		exists = owner
		NOT = { has_modifier = slave_colony }
		owner = {
			is_memorialist_empire = yes
		}
	}

	allow = {
		has_upgraded_capital_4 = yes
	}

	destroy_trigger = {
		exists = owner
		OR = {
			has_modifier = slave_colony
			owner = { is_memorialist_empire = no }
		}
	}

	convert_to = {
		building_avb_monument_corp_5
		building_avb_monument_hive_5
		building_avb_monument_machine_5
		building_avb_monument_5
	}

	resources = {
		category = planet_buildings
		produces = {
			trigger = { exists = owner }
			unity = 5
			multiplier = owner.trigger:num_ascension_perks
		}
		cost = {
			minerals = @avb_b5_minerals
			exotic_gases = @avb_b5_rare_cost
		}
		upkeep = {
			minerals = @avb_b5_upkeep
			exotic_gases = @avb_b5_rare_upkeep
		}
	}

	triggered_desc = {
		text = building_avb_monument_effect_5
	}
	planet_modifier = {
		planet_jobs_unity_produces_mult = 0.25
		planet_bureaucrats_upkeep_mult = -0.25
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_regular_empire = yes
			}
		}
		planet_civilians_unity_produces_add = 0.5
		planet_civilians_consumer_goods_upkeep_add = 0.25
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_gestalt = yes
			}
		}
		planet_maintenance_drones_unity_produces_add = 0.50
		planet_maintenance_drones_trade_produces_add = 0.50
		planet_maintenance_drones_minerals_upkeep_add = 0.25
	}
	#Tomb/Relic worlds
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_gestalt = no }
			OR = {
				is_planet_class = pc_nuked
				is_planet_class = pc_relic
			}
		}
		pop_government_ethic_attraction = 0.20
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_gestalt = yes }
			OR = {
				is_planet_class = pc_nuked
				is_planet_class = pc_relic
			}
		}
		planet_crime_no_happiness_add = -20
	}

	prerequisites = {
		"tech_avb_monument_5"
	}

	show_tech_unlock_if = {
		is_memorialist_empire = yes
	}
	upgrades = {
		building_avb_monument_memorial_6
	}
}
building_avb_monument_memorial_6 = {
	base_buildtime = @avb_b6_time
	can_build = no
	category = unity

	building_sets = {
		government
		unity
	}
	potential = {
		exists = owner
		NOT = { has_modifier = slave_colony }
		owner = {
			is_memorialist_empire = yes
		}
	}

	allow = {
		has_upgraded_capital_5 = yes
	}

	destroy_trigger = {
		exists = owner
		OR = {
			has_modifier = slave_colony
			owner = { is_memorialist_empire = no }
		}
	}

	convert_to = {
		building_avb_monument_corp_6
		building_avb_monument_hive_6
		building_avb_monument_machine_6
		building_avb_monument_6
	}

	resources = {
		category = planet_buildings
		produces = {
			trigger = { exists = owner }
			unity = 6
			multiplier = owner.trigger:num_ascension_perks
		}
		cost = {
			minerals = @avb_b6_minerals
			exotic_gases = @avb_b6_rare_cost
		}
		upkeep = {
			minerals = @avb_b6_upkeep
			exotic_gases = @avb_b6_rare_upkeep
		}
	}

	triggered_desc = {
		text = building_avb_monument_effect_6
	}
	planet_modifier = {
		planet_jobs_unity_produces_mult = 0.3
		planet_bureaucrats_upkeep_mult = -0.3
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_regular_empire = yes
			}
		}
		planet_civilians_unity_produces_add = 0.5
		planet_civilians_consumer_goods_upkeep_add = 0.25
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_gestalt = yes
			}
		}
		planet_maintenance_drones_unity_produces_add = 0.50
		planet_maintenance_drones_trade_produces_add = 0.50
		planet_maintenance_drones_minerals_upkeep_add = 0.25
	}
	#Tomb/Relic worlds
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_gestalt = no }
			OR = {
				is_planet_class = pc_nuked
				is_planet_class = pc_relic
			}
		}
		pop_government_ethic_attraction = 0.20
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_gestalt = yes }
			OR = {
				is_planet_class = pc_nuked
				is_planet_class = pc_relic
			}
		}
		planet_crime_no_happiness_add = -20
	}

	prerequisites = {
		"tech_avb_monument_6"
	}

	show_tech_unlock_if = {
		is_memorialist_empire = yes
	}
}


##########################
# Machine Empire Memorial
##########################
building_simulation_3 = {
	base_buildtime = @b3_time
	can_build = no
	category = unity

	building_sets = {
		government
		unity
	}

	potential = {
		exists = owner
		NOT = { has_modifier = slave_colony }
		owner = {
			is_machine_empire = yes
			is_memorialist_empire = no
		}
	}

	allow = {
		has_major_upgraded_capital = yes
	}

	destroy_trigger = {
		exists = owner
		OR = {
			has_modifier = slave_colony
			owner = {
				OR = {
					is_machine_empire = no
					is_memorialist_empire = yes
				}
			}
		}
	}

	convert_to = {
		building_corporate_forum
		building_hypercomms_forum
		building_galactic_memorial_3
		building_sensorium_3
	}

	resources = {
		category = planet_buildings
		produces = {
			trigger = { exists = owner }
			unity = 3
			multiplier = owner.trigger:num_ascension_perks
		}
		cost = {
			minerals = @b3_minerals
		}
	}

	planet_modifier = {
		planet_jobs_unity_produces_mult = 0.15
		planet_maintenance_drones_unity_produces_add = 0.50
		planet_maintenance_drones_trade_produces_add = 0.50
		planet_maintenance_drones_minerals_upkeep_add = 0.25
	}

	triggered_desc = {
		text = building_hypercomms_forum_effect
	}
	prerequisites = {
		"tech_hypercomms_forum"
	}

	ai_resource_production = {
		unity = 20
		trade = 5
	}

	show_tech_unlock_if = {
		is_machine_empire = yes
		is_memorialist_empire = no
	}
	upgrades = {
		"building_avb_monument_machine_4"
	}
}
building_avb_monument_machine_4 = {
	base_buildtime = @avb_b4_time
	can_build = no
	icon = building_avb_holo_theatre_4

	category = unity

	building_sets = {
		government
		unity
	}
	potential = {
		exists = owner
		NOT = { has_modifier = slave_colony }
		owner = {
			is_machine_empire = yes
			is_memorialist_empire = no
		}
	}

	allow = {
		has_fully_upgraded_capital = yes
	}

	destroy_trigger = {
		exists = owner
		OR = {
			has_modifier = slave_colony
			owner = {
				OR = {
					is_machine_empire = no
					is_memorialist_empire = yes
				}
			}
		}
	}

	convert_to = {
		building_avb_monument_corp_4
		building_avb_monument_hive_4
		building_avb_monument_4
		building_avb_monument_memorial_4
	}

	resources = {
		category = planet_buildings
		produces = {
			trigger = { exists = owner }
			unity = 4
			multiplier = owner.trigger:num_ascension_perks
		}
		cost = {
			minerals = @avb_b4_minerals
		}
	}

	planet_modifier = {
		planet_jobs_unity_produces_mult = 0.2
		planet_maintenance_drones_unity_produces_add = 0.50
		planet_maintenance_drones_trade_produces_add = 0.50
		planet_maintenance_drones_minerals_upkeep_add = 0.25
	}

	triggered_desc = {
		text = building_avb_monument_effect_4
	}

	prerequisites = {
		"tech_avb_monument_4"
	}

	show_tech_unlock_if = {
		is_machine_empire = yes
		is_memorialist_empire = no
	}
	upgrades = {
		building_avb_monument_machine_5
	}
}
building_avb_monument_machine_5 = {
	base_buildtime = @avb_b5_time
	can_build = no
	icon = building_avb_holo_theatre_5

	category = unity

	building_sets = {
		government
		unity
	}
	potential = {
		exists = owner
		NOT = { has_modifier = slave_colony }
		owner = {
			is_machine_empire = yes
			is_memorialist_empire = no
		}
	}

	allow = {
		has_upgraded_capital_4 = yes
	}

	destroy_trigger = {
		exists = owner
		OR = {
			has_modifier = slave_colony
			owner = {
				OR = {
					is_machine_empire = no
					is_memorialist_empire = yes
				}
			}
		}
	}

	convert_to = {
		building_avb_monument_corp_5
		building_avb_monument_hive_5
		building_avb_monument_5
		building_avb_monument_memorial_5
	}

	resources = {
		category = planet_buildings
		produces = {
			trigger = { exists = owner }
			unity = 5
			multiplier = owner.trigger:num_ascension_perks
		}
		cost = {
			minerals = @avb_b5_minerals
		}
	}

	planet_modifier = {
		planet_jobs_unity_produces_mult = 0.25
		planet_maintenance_drones_unity_produces_add = 0.50
		planet_maintenance_drones_trade_produces_add = 0.50
		planet_maintenance_drones_minerals_upkeep_add = 0.25
	}
	triggered_desc = {
		text = building_avb_monument_effect_5
	}
	prerequisites = {
		"tech_avb_monument_5"
	}

	show_tech_unlock_if = {
		is_machine_empire = yes
		is_memorialist_empire = no
	}
	upgrades = {
		building_avb_monument_machine_6
	}
}
building_avb_monument_machine_6 = {
	base_buildtime = @avb_b6_time
	can_build = no
	icon = building_avb_holo_theatre_6

	category = unity

	building_sets = {
		government
		unity
	}
	potential = {
		exists = owner
		NOT = { has_modifier = slave_colony }
		owner = {
			is_machine_empire = yes
			is_memorialist_empire = no
		}
	}

	allow = {
		has_upgraded_capital_5 = yes
	}

	destroy_trigger = {
		exists = owner
		OR = {
			has_modifier = slave_colony
			owner = {
				OR = {
					is_machine_empire = no
					is_memorialist_empire = yes
				}
			}
		}
	}

	convert_to = {
		building_avb_monument_corp_6
		building_avb_monument_hive_6
		building_avb_monument_6
		building_avb_monument_memorial_6
	}

	resources = {
		category = planet_buildings
		produces = {
			trigger = { exists = owner }
			unity = 6
			multiplier = owner.trigger:num_ascension_perks
		}
		cost = {
			minerals = @avb_b6_minerals
		}
	}
	planet_modifier = {
		planet_jobs_unity_produces_mult = 0.3
		planet_maintenance_drones_unity_produces_add = 0.50
		planet_maintenance_drones_trade_produces_add = 0.50
		planet_maintenance_drones_minerals_upkeep_add = 0.25
	}
	triggered_desc = {
		text = building_avb_monument_effect_6
	}

	prerequisites = {
		"tech_avb_monument_6"
	}

	show_tech_unlock_if = {
		is_machine_empire = yes
		is_memorialist_empire = no
	}
}

####################
# Megacorp Memorial
####################
building_corporate_forum = {
	base_buildtime = @b3_time
	icon = building_hypercomms_forum
	can_build = no
	category = unity

	building_sets = {
		government
		unity
	}

	potential = {
		exists = owner
		NOT = { has_modifier = slave_colony }
		owner = {
			is_megacorp = yes
		}
	}

	allow = {
		has_major_upgraded_capital = yes
	}

	destroy_trigger = {
		exists = owner
		OR = {
			has_modifier = slave_colony
			owner = {
				OR = {
					is_megacorp = no
					is_memorialist_empire = yes
				}
			}
		}
	}

	convert_to = {
		building_hypercomms_forum
		building_simulation_3
		building_galactic_memorial_3
		building_sensorium_3
	}

	resources = {
		category = planet_buildings
		produces = {
			trigger = { exists = owner }
			unity = 3
			multiplier = owner.trigger:num_ascension_perks
		}
		cost = {
			minerals = @b3_minerals
		}
	}

	planet_modifier = {
		planet_jobs_unity_produces_mult = 0.15
		planet_civilians_unity_produces_add = 0.5
		planet_civilians_consumer_goods_upkeep_add = 0.25
	}

	triggered_desc = {
		text = building_hypercomms_forum_effect
	}

	triggered_desc = {
		text = job_civilian_ethics_effect
	}

	prerequisites = {
		"tech_hypercomms_forum"
	}

	ai_resource_production = {
		unity = 20
	}

	show_tech_unlock_if = {
		is_megacorp = yes
	}
	upgrades = {
		building_avb_monument_corp_4
	}
}
building_avb_monument_corp_4 = {
	base_buildtime = @avb_b4_time
	can_build = no
	icon = building_avb_monument_4

	category = unity

	building_sets = {
		government
		unity
	}
	potential = {
		exists = owner
		NOT = { has_modifier = slave_colony }
		owner = {
			is_megacorp = yes
		}
	}

	allow = {
		has_fully_upgraded_capital = yes
	}

	destroy_trigger = {
		exists = owner
		OR = {
			has_modifier = slave_colony
			owner = {
				OR = {
					is_megacorp = no
					is_memorialist_empire = yes
				}
			}
		}
	}

	convert_to = {
		building_avb_monument_4
		building_avb_monument_hive_4
		building_avb_monument_machine_4
		building_avb_monument_memorial_4
	}

	resources = {
		category = planet_buildings
		produces = {
			trigger = { exists = owner }
			unity = 4
			multiplier = owner.trigger:num_ascension_perks
		}
		cost = {
			minerals = @avb_b4_minerals
		}
	}

	planet_modifier = {
		planet_jobs_unity_produces_mult = 0.2
		planet_civilians_unity_produces_add = 0.5
		planet_civilians_consumer_goods_upkeep_add = 0.25
	}

	triggered_desc = {
		text = building_avb_monument_effect_4
	}

	triggered_desc = {
		text = job_civilian_ethics_effect
	}

	prerequisites = {
		"tech_avb_monument_4"
	}

	show_tech_unlock_if = {
		is_megacorp = yes
	}
	upgrades = {
		"building_avb_monument_corp_5"
	}
}
building_avb_monument_corp_5 = {
	base_buildtime = @avb_b5_time
	can_build = no
	icon = building_avb_monument_5

	category = unity

	building_sets = {
		government
		unity
	}
	potential = {
		exists = owner
		NOT = { has_modifier = slave_colony }
		owner = {
			is_megacorp = yes
		}
	}

	allow = {
		has_fully_upgraded_capital = yes
	}

	destroy_trigger = {
		exists = owner
		OR = {
			has_modifier = slave_colony
			owner = {
				OR = {
					is_megacorp = no
					is_memorialist_empire = yes
				}
			}
		}
	}

	convert_to = {
		building_avb_monument_5
		building_avb_monument_hive_5
		building_avb_monument_machine_5
		building_avb_monument_memorial_5
	}

	resources = {
		category = planet_buildings
		produces = {
			trigger = { exists = owner }
			unity = 5
			multiplier = owner.trigger:num_ascension_perks
		}
		cost = {
			minerals = @avb_b5_minerals
		}
	}

	planet_modifier = {
		planet_jobs_unity_produces_mult = 0.25
		planet_civilians_unity_produces_add = 0.5
		planet_civilians_consumer_goods_upkeep_add = 0.25
	}

	triggered_desc = {
		text = building_avb_monument_effect_5
	}

	triggered_desc = {
		text = job_civilian_ethics_effect
	}

	prerequisites = {
		"tech_avb_monument_5"
	}

	show_tech_unlock_if = {
		is_megacorp = yes
	}
	upgrades = {
		"building_avb_monument_corp_6"
	}
}
building_avb_monument_corp_6 = {
	base_buildtime = @avb_b6_time
	can_build = no
	icon = building_avb_monument_6

	category = unity

	building_sets = {
		government
		unity
	}
	potential = {
		exists = owner
		NOT = { has_modifier = slave_colony }
		owner = {
			is_megacorp = yes
		}
	}

	allow = {
		has_upgraded_capital_4 = yes
	}

	destroy_trigger = {
		exists = owner
		OR = {
			has_modifier = slave_colony
			owner = {
				OR = {
					is_megacorp = no
					is_memorialist_empire = yes
				}
			}
		}
	}

	convert_to = {
		building_avb_monument_6
		building_avb_monument_hive_6
		building_avb_monument_machine_6
		building_avb_monument_memorial_6
	}

	resources = {
		category = planet_buildings
		produces = {
			trigger = { exists = owner }
			unity = 6
			multiplier = owner.trigger:num_ascension_perks
		}
		cost = {
			minerals = @avb_b6_minerals
		}
	}

	planet_modifier = {
		planet_jobs_unity_produces_mult = 0.3
		planet_civilians_unity_produces_add = 0.5
		planet_civilians_consumer_goods_upkeep_add = 0.25
	}

	triggered_desc = {
		text = building_avb_monument_effect_6
	}

	triggered_desc = {
		text = job_civilian_ethics_effect
	}

	prerequisites = {
		"tech_avb_monument_6"
	}

	show_tech_unlock_if = {
		is_megacorp = yes
	}
}

#######################
# Hive Empire Memorial
#######################
building_sensorium_3 = {
	base_buildtime = @b3_time
	can_build = no
	category = unity

	building_sets = {
		government
		unity
	}

	potential = {
		exists = owner
		NOT = { has_modifier = slave_colony }
		owner = {
			is_hive_empire = yes
			is_memorialist_empire = no
			is_wilderness_empire = no # see 'building_avatar_chamber_3'
		}
	}
	allow = {
		has_major_upgraded_capital = yes
	}
	destroy_trigger = {
		exists = owner
		OR = {
			has_modifier = slave_colony
			owner = {
				OR = {
					is_hive_empire = no
					is_memorialist_empire = yes
					is_wilderness_empire = yes
				}
			}
		}
	}
	convert_to = {
		building_corporate_forum
		building_hypercomms_forum
		building_galactic_memorial_3
		building_simulation_3
		building_avatar_chamber_3
	}

	prerequisites = {
		"tech_hive_confluence"
	}
	show_tech_unlock_if = {
		is_hive_empire = yes
		is_memorialist_empire = no
		is_wilderness_empire = no
	}

	resources = {
		category = planet_buildings
		produces = {
			trigger = { exists = owner }
			unity = 3
			multiplier = owner.trigger:num_ascension_perks
		}
		cost = {
			minerals = @b3_minerals
		}
	}

	planet_modifier = {
		planet_jobs_unity_produces_mult = 0.15
		planet_maintenance_drones_unity_produces_add = 0.50
		planet_maintenance_drones_trade_produces_add = 0.50
		planet_maintenance_drones_minerals_upkeep_add = 0.25
	}

	ai_resource_production = {
		unity = 20
		trade = 5
	}

	triggered_desc = {
		text = building_hypercomms_forum_effect
	}
	upgrades = {
		"building_avb_monument_hive_4"
	}
}
building_avb_monument_hive_4 = {
	base_buildtime = @avb_b4_time
	can_build = no
	icon = building_avb_holo_theatre_4

	category = unity

	building_sets = {
		government
		unity
	}
	potential = {
		exists = owner
		NOT = { has_modifier = slave_colony }
		owner = {
			is_hive_empire = yes
			is_memorialist_empire = no
			is_wilderness_empire = no 
		}
	}

	allow = {
		has_fully_upgraded_capital = yes
	}

	destroy_trigger = {
		exists = owner
		OR = {
			has_modifier = slave_colony
			owner = {
				OR = {
					is_hive_empire = no
					is_memorialist_empire = yes
				}
			}
		}
	}

	convert_to = {
		building_avb_monument_corp_4
		building_avb_monument_4
		building_avb_monument_machine_4
		building_avb_monument_memorial_4
	}

	resources = {
		category = planet_buildings
		produces = {
			trigger = { exists = owner }
			unity = 4
			multiplier = owner.trigger:num_ascension_perks
		}
		cost = {
			minerals = @avb_b4_minerals
		}
	}

	planet_modifier = {
		planet_jobs_unity_produces_mult = 0.2
		planet_maintenance_drones_unity_produces_add = 0.50
		planet_maintenance_drones_trade_produces_add = 0.50
		planet_maintenance_drones_minerals_upkeep_add = 0.25
	}

	triggered_desc = {
		text = building_avb_monument_effect_4
	}

	triggered_desc = {
		text = job_evaluator_effect_desc
	}

	prerequisites = {
		"tech_avb_monument_4"
	}

	show_tech_unlock_if = {
		is_hive_empire = yes
		is_memorialist_empire = no
		is_wilderness_empire = no
	}
	upgrades = {
		building_avb_monument_hive_5
	}
}
building_avb_monument_hive_5 = {
	base_buildtime = @avb_b5_time
	can_build = no
	icon = building_avb_holo_theatre_5

	category = unity

	building_sets = {
		government
		unity
	}
	potential = {
		exists = owner
		NOT = { has_modifier = slave_colony }
		owner = {
			is_hive_empire = yes
			is_memorialist_empire = no
			is_wilderness_empire = no 
		}
	}

	allow = {
		has_upgraded_capital_4 = yes
	}

	destroy_trigger = {
		exists = owner
		OR = {
			has_modifier = slave_colony
			owner = {
				OR = {
					is_hive_empire = no
					is_memorialist_empire = yes
				}
			}
		}
	}

	convert_to = {
		building_avb_monument_corp_5
		building_avb_monument_5
		building_avb_monument_machine_5
		building_avb_monument_memorial_5
	}

	resources = {
		category = planet_buildings
		produces = {
			trigger = { exists = owner }
			unity = 5
			multiplier = owner.trigger:num_ascension_perks
		}
		cost = {
			minerals = @avb_b5_minerals
		}
	}

	planet_modifier = {
		planet_jobs_unity_produces_mult = 0.25
		planet_maintenance_drones_unity_produces_add = 0.50
		planet_maintenance_drones_trade_produces_add = 0.50
		planet_maintenance_drones_minerals_upkeep_add = 0.25
	}

	triggered_desc = {
		text = building_avb_monument_effect_5
	}

	triggered_desc = {
		text = job_evaluator_effect_desc
	}

	prerequisites = {
		"tech_avb_monument_5"
	}

	show_tech_unlock_if = {
		is_hive_empire = yes
		is_memorialist_empire = no
		is_wilderness_empire = no
	}
	upgrades = {
		building_avb_monument_hive_6
	}
}
building_avb_monument_hive_6 = {
	base_buildtime = @avb_b6_time
	can_build = no
	icon = building_avb_holo_theatre_6

	category = unity

	building_sets = {
		government
		unity
	}
	potential = {
		exists = owner
		NOT = { has_modifier = slave_colony }
		owner = {
			is_hive_empire = yes
			is_memorialist_empire = no
			is_wilderness_empire = no 
		}
	}

	allow = {
		has_upgraded_capital_5 = yes
	}

	destroy_trigger = {
		exists = owner
		OR = {
			has_modifier = slave_colony
			owner = {
				OR = {
					is_hive_empire = no
					is_memorialist_empire = yes
				}
			}
		}
	}

	convert_to = {
		building_avb_monument_corp_6
		building_avb_monument_6
		building_avb_monument_machine_6
		building_avb_monument_memorial_6
	}

	resources = {
		category = planet_buildings
		produces = {
			trigger = { exists = owner }
			unity = 6
			multiplier = owner.trigger:num_ascension_perks
		}
		cost = {
			minerals = @avb_b6_minerals
		}
	}

	planet_modifier = {
		planet_jobs_unity_produces_mult = 0.3
		planet_maintenance_drones_unity_produces_add = 0.50
		planet_maintenance_drones_trade_produces_add = 0.50
		planet_maintenance_drones_minerals_upkeep_add = 0.25
	}
	triggered_desc = {
		text = building_avb_monument_effect_6
	}

	triggered_desc = {
		text = job_evaluator_effect_desc
	}

	prerequisites = {
		"tech_avb_monument_6"
	}

	show_tech_unlock_if = {
		is_hive_empire = yes
		is_memorialist_empire = no
		is_wilderness_empire = no
	}
}

##################
# Unity boosters
##################

building_autocurating_vault = {
	base_buildtime = @b2_time
	planet_limit = 1
	category = unity

	building_sets = {
		unity
	}

	potential = {
		exists = owner
		is_special_colony_type = no
		owner = {
			is_machine_empire = no
			is_megacorp = no
			is_spiritualist = no
			OR = {
				is_hive_empire = yes
				has_make_spiritualist_perk = no
			}
		}
	}

	allow = {
	}

	destroy_trigger = {
		exists = owner
		OR = {
			has_modifier = slave_colony
			owner = {
				OR = {
					is_machine_empire = yes
					is_spiritualist = yes
					is_megacorp = yes
				}
			}
		}
	}

	convert_to = {
		building_citadel_of_faith
		building_alpha_hub
		building_corporate_vault
		building_trophy_vault
	}

	resources = {
		category = planet_buildings
		cost = {
			trigger = {
				has_ringworld_output_boost = no
			}
			minerals = @b2_minerals
			rare_crystals = @b2_rare_cost
		}
		cost = {
			trigger = {
				has_ringworld_output_boost = yes
			}
			minerals = 1200
			rare_crystals = 375
		}
		upkeep = {
			trigger = {
				has_ringworld_output_boost = no
			}
			energy = @b2_upkeep
			rare_crystals = @b2_rare_upkeep
		}
		upkeep = {
			trigger = {
				has_ringworld_output_boost = yes
			}
			energy = 8
			rare_crystals = 3
		}
	}

	planet_modifier = {
		planet_bureaucrats_unity_produces_add = 1
		planet_bureaucrats_physics_research_produces_add = 1
		planet_bureaucrats_society_research_produces_add = 1
		planet_bureaucrats_engineering_research_produces_add = 1
	}

	triggered_planet_modifier = {
		potential = {
			has_ringworld_output_boost = yes
		}
		planet_bureaucrats_unity_produces_add = 1
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_gestalt = no
			}
		}
		planet_bureaucrats_consumer_goods_upkeep_add = 3
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_machine_empire = yes
			}
		}
		planet_bureaucrats_energy_upkeep_add = 6
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_hive_empire = yes
				is_lithoid_empire = no
			}
		}
		planet_bureaucrats_food_upkeep_add = 3
		planet_bureaucrats_energy_upkeep_add = 3
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_hive_empire = yes
				is_lithoid_empire = yes
			}
		}
		planet_bureaucrats_minerals_upkeep_add = 3
		planet_bureaucrats_energy_upkeep_add = 3
	}

	prerequisites = {
		"tech_autocurating_vault"
	}

	show_tech_unlock_if = {
		is_machine_empire = no
		is_spiritualist = no
		is_megacorp = no
		is_wilderness_empire = no
		OR = {
			is_hive_empire = yes
			has_make_spiritualist_perk = no
		}
	}
	upgrades = {
		building_avb_autocurating_vault_2
	}
}
building_avb_autocurating_vault_2 = {
	base_buildtime = @avb_b3_time
	can_build = no
	icon = building_avb_unity_booster_5
	category = unity

	building_sets = {
		unity
	}
	potential = {
		exists = owner
		is_special_colony_type = no
		owner = {
			is_machine_empire = no
			is_megacorp = no
			is_spiritualist = no
			OR = {
				is_hive_empire = yes
				has_make_spiritualist_perk = no
			}
		}
	}

	allow = {
		has_upgraded_capital_4 = yes
	}
	destroy_trigger = {
		exists = owner
		OR = {
			has_modifier = slave_colony
			owner = {
				OR = {
					is_machine_empire = yes
					is_spiritualist = yes
					is_megacorp = yes
				}
			}
		}
	}

	convert_to = {
		building_avb_citadel_of_faith_2
		building_avb_alpha_hub_2
		building_avb_corporate_vault_2
		building_avb_trophy_vault_2
	}

	resources = {
		category = planet_buildings
		cost = {
			trigger = {
				has_ringworld_output_boost = no
			}
			minerals = @b3_minerals
			rare_crystals = @b3_rare_cost
		}
		cost = {
			trigger = {
				has_ringworld_output_boost = yes
			}
			minerals = 1200
			rare_crystals = 375
		}
		upkeep = {
			trigger = {
				has_ringworld_output_boost = no
			}
			energy = @b3_upkeep
			rare_crystals = @b3_rare_upkeep
		}
		upkeep = {
			trigger = {
				has_ringworld_output_boost = yes
			}
			energy = 8
			rare_crystals = 3
		}
	}
	planet_modifier = {
		planet_bureaucrats_unity_produces_add = 1.5
		planet_bureaucrats_physics_research_produces_add = 1.5
		planet_bureaucrats_society_research_produces_add = 1.5
		planet_bureaucrats_engineering_research_produces_add = 1.5
	}

	triggered_planet_modifier = {
		potential = {
			has_ringworld_output_boost = yes
		}
		planet_bureaucrats_unity_produces_add = 1
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_gestalt = no
			}
		}
		planet_bureaucrats_consumer_goods_upkeep_add = 4.5
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_machine_empire = yes
			}
		}
		planet_bureaucrats_energy_upkeep_add = 9
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_hive_empire = yes
				is_lithoid_empire = no
			}
		}
		planet_bureaucrats_food_upkeep_add = 4.5
		planet_bureaucrats_energy_upkeep_add = 4.5
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_hive_empire = yes
				is_lithoid_empire = yes
			}
		}
		planet_bureaucrats_minerals_upkeep_add = 4.5
		planet_bureaucrats_energy_upkeep_add = 4.5
	}
	prerequisites = {
		"tech_avb_autocurating_vault_2"
	}
	show_tech_unlock_if = {
		is_machine_empire = no
		is_spiritualist = no
		is_megacorp = no
		OR = {
			is_hive_empire = yes
			has_make_spiritualist_perk = no
		}
	}
}

building_citadel_of_faith = {
	base_buildtime = @b2_time
	planet_limit = 1
	category = unity

	building_sets = {
		unity
	}

	potential = {
		exists = owner
		owner = {
			OR = {
				is_spiritualist = yes
				AND = {
					is_gestalt = no
					has_make_spiritualist_perk = yes
				}
			}
		}
		NOR = {
			has_modifier = slave_colony
			has_modifier = penal_colony
		}
	}

	allow = {
	}

	destroy_trigger = {
		exists = owner
		OR = {
			owner = {
				OR = {
					AND = {
						is_spiritualist = no
						has_make_spiritualist_perk = no
					}
					is_gestalt = yes
				}
			}
			has_modifier = slave_colony
		}
	}

	convert_to = {
		building_autocurating_vault
		building_alpha_hub
		building_corporate_vault
		building_trophy_vault
	}

	resources = {
		category = planet_buildings
		cost = {
			trigger = {
				has_ringworld_output_boost = no
			}
			minerals = @b2_minerals
			rare_crystals = @b2_rare_cost
		}
		cost = {
			trigger = {
				has_ringworld_output_boost = yes
			}
			minerals = 1200
			rare_crystals = 375
		}
		upkeep = {
			trigger = {
				has_ringworld_output_boost = no
			}
			energy = @b2_upkeep
			rare_crystals = @b2_rare_upkeep
		}
		upkeep = {
			trigger = {
				has_ringworld_output_boost = yes
			}
			energy = 8
			rare_crystals = 3
		}
	}

	planet_modifier = {
		planet_bureaucrats_unity_produces_add = 3
	}

	triggered_planet_modifier = {
		potential = {
			has_ringworld_output_boost = yes
		}
		planet_bureaucrats_unity_produces_add = 1
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_gestalt = no
			}
		}
		planet_bureaucrats_consumer_goods_upkeep_add = 3
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_machine_empire = yes
			}
		}
		planet_bureaucrats_energy_upkeep_add = 6
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_hive_empire = yes
				is_lithoid_empire = no
			}
		}
		planet_bureaucrats_food_upkeep_add = 3
		planet_bureaucrats_energy_upkeep_add = 3
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_hive_empire = yes
				is_lithoid_empire = yes
			}
		}
		planet_bureaucrats_minerals_upkeep_add = 3
		planet_bureaucrats_energy_upkeep_add = 3
	}

	prerequisites = {
		"tech_transcendent_faith"
	}
	upgrades = {
		building_avb_citadel_of_faith_2
	}
}
building_avb_citadel_of_faith_2 = {
	base_buildtime = @avb_b3_time
	can_build = no

	category = unity

	building_sets = {
		unity
	}
	potential = {
		exists = owner
		owner = {
			OR = {
				is_spiritualist = yes
				AND = {
					is_gestalt = no
					has_make_spiritualist_perk = yes
				}
			}
		}
		NOR = {
			has_modifier = slave_colony
			has_modifier = penal_colony
		}
	}

	allow = {
		has_upgraded_capital_4 = yes
	}
	destroy_trigger = {
		exists = owner
		OR = {
			owner = {
				OR = {
					AND = {
						is_spiritualist = no
						has_make_spiritualist_perk = no
					}
					is_gestalt = yes
				}
			}
			has_modifier = slave_colony
		}
	}

	convert_to = {
		building_avb_autocurating_vault_2
		building_avb_alpha_hub_2
		building_avb_corporate_vault_2
		building_avb_trophy_vault_2
	}
	resources = {
		category = planet_buildings
		cost = {
			trigger = {
				has_ringworld_output_boost = no
			}
			minerals = @b3_minerals
			rare_crystals = @b3_rare_cost
		}
		cost = {
			trigger = {
				has_ringworld_output_boost = yes
			}
			minerals = 1200
			rare_crystals = 375
		}
		upkeep = {
			trigger = {
				has_ringworld_output_boost = no
			}
			energy = @b3_upkeep
			rare_crystals = @b3_rare_upkeep
		}
		upkeep = {
			trigger = {
				has_ringworld_output_boost = yes
			}
			energy = 8
			rare_crystals = 3
		}
	}

	planet_modifier = {
		planet_bureaucrats_unity_produces_add = 4.5
	}

	triggered_planet_modifier = {
		potential = {
			has_ringworld_output_boost = yes
		}
		planet_bureaucrats_unity_produces_add = 1
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_gestalt = no
			}
		}
		planet_bureaucrats_consumer_goods_upkeep_add = 4.5
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_machine_empire = yes
			}
		}
		planet_bureaucrats_energy_upkeep_add = 9
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_hive_empire = yes
				is_lithoid_empire = no
			}
		}
		planet_bureaucrats_food_upkeep_add = 4.5
		planet_bureaucrats_energy_upkeep_add = 4.5
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_hive_empire = yes
				is_lithoid_empire = yes
			}
		}
		planet_bureaucrats_minerals_upkeep_add = 4.5
		planet_bureaucrats_energy_upkeep_add = 4.5
	}
	prerequisites = {
		"tech_avb_transcendent_faith_2"
	}
}

building_corporate_vault = {
	base_buildtime = @b2_time
	planet_limit = 1
	icon = building_autocurating_vault

	category = unity

	building_sets = {
		unity
	}

	potential = {
		exists = owner
		NOR = {
			has_modifier = slave_colony
			has_modifier = penal_colony
		}
		owner = {
			is_megacorp = yes
			is_spiritualist = no
			has_make_spiritualist_perk = no
		}
	}

	allow = {
	}

	destroy_trigger = {
		exists = owner
		OR = {
			has_modifier = slave_colony
			owner = {
				OR = {
					is_megacorp = no
					is_spiritualist = yes
					has_make_spiritualist_perk = yes
				}
			}
		}
	}

	convert_to = {
		building_citadel_of_faith
		building_autocurating_vault
		building_alpha_hub
		building_trophy_vault
	}

	resources = {
		category = planet_buildings
		cost = {
			trigger = {
				has_ringworld_output_boost = no
			}
			minerals = @b2_minerals
			rare_crystals = @b2_rare_cost
		}
		cost = {
			trigger = {
				has_ringworld_output_boost = yes
			}
			minerals = 1200
			rare_crystals = 375
		}
		upkeep = {
			trigger = {
				has_ringworld_output_boost = no
			}
			energy = @b2_upkeep
			rare_crystals = @b2_rare_upkeep
		}
		upkeep = {
			trigger = {
				has_ringworld_output_boost = yes
			}
			energy = 8
			rare_crystals = 3
		}
	}

	triggered_planet_modifier = {
		potential = {
			has_ringworld_output_boost = yes
		}
		planet_bureaucrats_unity_produces_add = 1
	}

	planet_modifier = {
		planet_bureaucrats_unity_produces_add = 1
		planet_bureaucrats_trade_produces_add = 5
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_gestalt = no
			}
		}
		planet_bureaucrats_consumer_goods_upkeep_add = 3
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_machine_empire = yes
			}
		}
		planet_bureaucrats_energy_upkeep_add = 6
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_hive_empire = yes
				is_lithoid_empire = no
			}
		}
		planet_bureaucrats_food_upkeep_add = 3
		planet_bureaucrats_energy_upkeep_add = 3
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_hive_empire = yes
				is_lithoid_empire = yes
			}
		}
		planet_bureaucrats_minerals_upkeep_add = 3
		planet_bureaucrats_energy_upkeep_add = 3
	}

	prerequisites = {
		"tech_autocurating_vault"
	}

	show_tech_unlock_if = {
		is_megacorp = yes
		is_spiritualist = no
		has_make_spiritualist_perk = no
	}
	upgrades = {
		building_avb_corporate_vault_2
	}
}
building_avb_corporate_vault_2 = {
	base_buildtime = @avb_b3_time

	can_build = no
	icon = building_avb_unity_booster_5

	category = unity
	building_sets = {
		unity
	}

	potential = {
		exists = owner
		NOR = {
			has_modifier = slave_colony
			has_modifier = penal_colony
		}
		owner = {
			is_megacorp = yes
			is_spiritualist = no
			has_make_spiritualist_perk = no
		}
	}

	allow = {
		has_upgraded_capital_4 = yes
	}
	destroy_trigger = {
		exists = owner
		OR = {
			has_modifier = slave_colony
			owner = {
				OR = {
					is_megacorp = no
					is_spiritualist = yes
					has_make_spiritualist_perk = yes
				}
			}
		}
	}

	convert_to = {
		building_avb_citadel_of_faith_2
		building_avb_autocurating_vault_2
		building_avb_alpha_hub_2
		building_avb_trophy_vault_2
	}

	resources = {
		category = planet_buildings
		cost = {
			trigger = {
				has_ringworld_output_boost = no
			}
			minerals = @b3_minerals
			rare_crystals = @b3_rare_cost
		}
		cost = {
			trigger = {
				has_ringworld_output_boost = yes
			}
			minerals = 1200
			rare_crystals = 375
		}
		upkeep = {
			trigger = {
				has_ringworld_output_boost = no
			}
			energy = @b3_upkeep
			rare_crystals = @b3_rare_upkeep
		}
		upkeep = {
			trigger = {
				has_ringworld_output_boost = yes
			}
			energy = 8
			rare_crystals = 3
		}
	}


	triggered_planet_modifier = {
		potential = {
			has_ringworld_output_boost = yes
		}
		planet_bureaucrats_unity_produces_add = 1
	}

	planet_modifier = {
		planet_bureaucrats_unity_produces_add = 1.5
		planet_bureaucrats_trade_produces_add = 7.5
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_gestalt = no
			}
		}
		planet_bureaucrats_consumer_goods_upkeep_add = 4.5
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_machine_empire = yes
			}
		}
		planet_bureaucrats_energy_upkeep_add = 9
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_hive_empire = yes
				is_lithoid_empire = no
			}
		}
		planet_bureaucrats_food_upkeep_add = 4.5
		planet_bureaucrats_energy_upkeep_add = 4.5
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_hive_empire = yes
				is_lithoid_empire = yes
			}
		}
		planet_bureaucrats_minerals_upkeep_add = 4.5
		planet_bureaucrats_energy_upkeep_add = 4.5
	}
	prerequisites = {
		"tech_avb_autocurating_vault_2"
	}
	show_tech_unlock_if = {
		is_megacorp = yes
		is_spiritualist = no
		has_make_spiritualist_perk = no
	}
}

building_alpha_hub = {
	base_buildtime = @b2_time
	planet_limit = 1
	icon = building_autocurating_vault

	category = unity

	building_sets = {
		unity
	}

	potential = {
		exists = owner
		owner = {
			is_machine_empire = yes
			NOT = {
				has_valid_civic = civic_machine_servitor
			}
		}
	}

	allow = {
		has_major_upgraded_capital = yes
	}

	destroy_trigger = {
		exists = owner
		owner = {
			OR = {
				is_machine_empire = no
				has_valid_civic = civic_machine_servitor
			}
		}
	}

	convert_to = {
		building_autocurating_vault
		building_citadel_of_faith
		building_corporate_vault
		building_trophy_vault
	}

	resources = {
		category = planet_buildings
		cost = {
			trigger = {
				has_ringworld_output_boost = no
			}
			minerals = @b2_minerals
			rare_crystals = @b2_rare_cost
		}
		cost = {
			trigger = {
				has_ringworld_output_boost = yes
			}
			minerals = 1200
			rare_crystals = 375
		}
		upkeep = {
			trigger = {
				has_ringworld_output_boost = no
			}
			energy = @b2_upkeep
			rare_crystals = @b2_rare_upkeep
		}
		upkeep = {
			trigger = {
				has_ringworld_output_boost = yes
			}
			energy = 8
			rare_crystals = 3
		}
	}

	planet_modifier = {
		planet_bureaucrats_unity_produces_add = 1
		planet_bureaucrats_physics_research_produces_add = 1
		planet_bureaucrats_society_research_produces_add = 1
		planet_bureaucrats_engineering_research_produces_add = 1
	}

	triggered_planet_modifier = {
		potential = {
			has_ringworld_output_boost = yes
		}
		planet_bureaucrats_unity_produces_add = 1
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_gestalt = no
			}
		}
		planet_bureaucrats_consumer_goods_upkeep_add = 1
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_machine_empire = yes
			}
		}
		planet_bureaucrats_energy_upkeep_add = 2
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_hive_empire = yes
				is_lithoid_empire = no
			}
		}
		planet_bureaucrats_food_upkeep_add = 1
		planet_bureaucrats_energy_upkeep_add = 1
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_hive_empire = yes
				is_lithoid_empire = yes
			}
		}
		planet_bureaucrats_minerals_upkeep_add = 1
		planet_bureaucrats_energy_upkeep_add = 1
	}

	prerequisites = {
		"tech_autocurating_vault"
	}

	show_tech_unlock_if = {
		is_machine_empire = yes
		NOT = {
			has_valid_civic = civic_machine_servitor
		}
	}
	upgrades = {
		building_avb_alpha_hub_2
	}
}
building_avb_alpha_hub_2 = {
	base_buildtime = @b3_time
	icon = building_avb_unity_booster_5
	category = unity

	building_sets = {
		unity
	}
	can_build = no
	potential = {
		exists = owner
		owner = {
			is_machine_empire = yes
			NOT = {
				has_valid_civic = civic_machine_servitor
			}
		}
	}

	allow = {
		has_upgraded_capital_4 = yes
	}
	destroy_trigger = {
		exists = owner
		owner = {
			OR = {
				is_machine_empire = no
				has_valid_civic = civic_machine_servitor
			}
		}
	}

	convert_to = {
		building_avb_autocurating_vault_2
		building_avb_citadel_of_faith_2
		building_avb_corporate_vault_2
		building_avb_trophy_vault_2
	}

	resources = {
		category = planet_buildings
		cost = {
			trigger = {
				has_ringworld_output_boost = no
			}
			minerals = @b3_minerals
			rare_crystals = @b3_rare_cost
		}
		cost = {
			trigger = {
				has_ringworld_output_boost = yes
			}
			minerals = 1200
			rare_crystals = 375
		}
		upkeep = {
			trigger = {
				has_ringworld_output_boost = no
			}
			energy = @b3_upkeep
			rare_crystals = @b3_rare_upkeep
		}
		upkeep = {
			trigger = {
				has_ringworld_output_boost = yes
			}
			energy = 8
			rare_crystals = 3
		}
	}
	planet_modifier = {
		planet_bureaucrats_unity_produces_add = 1.5
		planet_bureaucrats_physics_research_produces_add = 1.5
		planet_bureaucrats_society_research_produces_add = 1.5
		planet_bureaucrats_engineering_research_produces_add = 1.5
	}

	triggered_planet_modifier = {
		potential = {
			has_ringworld_output_boost = yes
		}
		planet_bureaucrats_unity_produces_add = 1
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_gestalt = no
			}
		}
		planet_bureaucrats_consumer_goods_upkeep_add = 1.5
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_machine_empire = yes
			}
		}
		planet_bureaucrats_energy_upkeep_add = 3
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_hive_empire = yes
				is_lithoid_empire = no
			}
		}
		planet_bureaucrats_food_upkeep_add = 1.5
		planet_bureaucrats_energy_upkeep_add = 1.5
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_hive_empire = yes
				is_lithoid_empire = yes
			}
		}
		planet_bureaucrats_minerals_upkeep_add = 1.5
		planet_bureaucrats_energy_upkeep_add = 1.5
	}

	prerequisites = {
		"tech_avb_autocurating_vault_2"
	}

	show_tech_unlock_if = {
		is_machine_empire = yes
		NOT = {
			has_valid_civic = civic_machine_servitor
		}
	}
}

# Servitors
building_organic_paradise = {
	base_buildtime = @b2_time
	can_build = no
	icon = building_paradise_dome

	category = unity

	building_sets = {
		urban
		unity
	}

	potential = {
		exists = owner
		owner = {
			has_valid_civic = civic_machine_servitor

		}
	}

	destroy_trigger = {
		exists = owner
		NOT = { owner = { has_valid_civic = civic_machine_servitor } }
	}

	convert_to = {
		building_paradise_dome
		building_communal_housing_large
	}

	resources = {
		category = planet_buildings
		cost = {
			minerals = @b2_minerals
			exotic_gases = @b2_rare_cost
		}
		upkeep = {
			energy = @b2_upkeep
			exotic_gases = @b2_rare_upkeep
		}
	}

	planet_modifier = {
		job_bio_trophy_add = 3000
	}

	triggered_desc = {
		text = job_bio_trophy_effect_desc
	}

	prerequisites = { "tech_paradise_dome" }

	show_tech_unlock_if = {
		owner = { has_valid_civic = civic_machine_servitor }
	}

	ai_weight_coefficient = 1.2

	# Here we try to adress the second issue that the AI cant evaluate the pop job output of the bio trophy given the happiness trigger that was put inplace to guard against players exploiting bio trophies

	#science
	ai_resource_production = {
		unity = 20
		physics_research = 20

		trigger = {
			any_owned_pop_group = {
				is_pop_category = bio_trophy_unemployment
			}

			planet_resource_compare = {
				resource = physics_research
				value >= 100
				type = produces
			}
		}
	}

	#alloys
	ai_resource_production = {
		unity = 20
		alloys = 20

		trigger = {
			any_owned_pop_group = {
				is_pop_category = bio_trophy_unemployment
			}

			planet_resource_compare = {
				resource = alloys
				value >= 100
				type = produces
			}
		}
	}

	#cgs
	ai_resource_production = {
		unity = 20
		consumer_goods = 20

		trigger = {
			any_owned_pop_group = {
				is_pop_category = bio_trophy_unemployment
			}

			planet_resource_compare = {
				resource = consumer_goods
				value >= 100
				type = produces
			}
		}
	}
	upgrades = {
		"building_avb_organic_sanctuary_3"
	}
}

building_avb_organic_sanctuary_3 = {
	base_buildtime = @avb_b3_time
	can_build = no
	icon = building_paradise_dome

	category = unity

	building_sets = {
		urban
		unity
	}

	potential = {
		exists = owner
		owner = {
			has_valid_civic = civic_machine_servitor

		}
	}

	destroy_trigger = {
		exists = owner
		NOT = { owner = { has_valid_civic = civic_machine_servitor } }
	}

	convert_to = {
		building_avb_residence_3
		building_avb_communal_housing_3
	}

	resources = {
		category = planet_buildings
		cost = {
			minerals = @avb_b3_minerals
			exotic_gases = @avb_b3_rare_cost
		}
		upkeep = {
			energy = @avb_b3_upkeep
			exotic_gases = @avb_b3_rare_upkeep
		}
	}

	planet_modifier = {
		job_bio_trophy_add = 4500
	}

	triggered_desc = {
		text = job_bio_trophy_effect_desc
	}

	prerequisites = { "tech_avb_residence_3" }

	show_tech_unlock_if = {
		owner = { has_valid_civic = civic_machine_servitor }
	}

	ai_weight_coefficient = 1.2

	# Here we try to adress the second issue that the AI cant evaluate the pop job output of the bio trophy given the happiness trigger that was put inplace to guard against players exploiting bio trophies

	#science
	ai_resource_production = {
		unity = 20
		physics_research = 20

		trigger = {
			any_owned_pop_group = {
				is_pop_category = bio_trophy_unemployment
			}

			planet_resource_compare = {
				resource = physics_research
				value >= 100
				type = produces
			}
		}
	}

	#alloys
	ai_resource_production = {
		unity = 20
		alloys = 20

		trigger = {
			any_owned_pop_group = {
				is_pop_category = bio_trophy_unemployment
			}

			planet_resource_compare = {
				resource = alloys
				value >= 100
				type = produces
			}
		}
	}

	#cgs
	ai_resource_production = {
		unity = 20
		consumer_goods = 20

		trigger = {
			any_owned_pop_group = {
				is_pop_category = bio_trophy_unemployment
			}

			planet_resource_compare = {
				resource = consumer_goods
				value >= 100
				type = produces
			}
		}
	}
	upgrades = {
		"building_avb_organic_sanctuary_4"
	}
}
building_avb_organic_sanctuary_4 = {
	base_buildtime = @avb_b4_time
	can_build = no
	icon = building_paradise_dome

	category = unity

	building_sets = {
		urban
		unity
	}

	potential = {
		exists = owner
		owner = {
			has_valid_civic = civic_machine_servitor

		}
	}

	destroy_trigger = {
		exists = owner
		NOT = { owner = { has_valid_civic = civic_machine_servitor } }
	}

	convert_to = {
		building_avb_residence_4
		building_avb_communal_housing_4
	}

	resources = {
		category = planet_buildings
		cost = {
			minerals = @avb_b4_minerals
			exotic_gases = @avb_b4_rare_cost
		}
		upkeep = {
			energy = @avb_b4_upkeep
			exotic_gases = @avb_b4_rare_upkeep
		}
	}

	planet_modifier = {
		job_bio_trophy_add = 6000
	}

	triggered_desc = {
		text = job_bio_trophy_effect_desc
	}

	prerequisites = { "tech_avb_residence_4" }

	show_tech_unlock_if = {
		owner = { has_valid_civic = civic_machine_servitor }
	}

	ai_weight_coefficient = 1.2

	# Here we try to adress the second issue that the AI cant evaluate the pop job output of the bio trophy given the happiness trigger that was put inplace to guard against players exploiting bio trophies

	#science
	ai_resource_production = {
		unity = 20
		physics_research = 20

		trigger = {
			any_owned_pop_group = {
				is_pop_category = bio_trophy_unemployment
			}

			planet_resource_compare = {
				resource = physics_research
				value >= 100
				type = produces
			}
		}
	}

	#alloys
	ai_resource_production = {
		unity = 20
		alloys = 20

		trigger = {
			any_owned_pop_group = {
				is_pop_category = bio_trophy_unemployment
			}

			planet_resource_compare = {
				resource = alloys
				value >= 100
				type = produces
			}
		}
	}

	#cgs
	ai_resource_production = {
		unity = 20
		consumer_goods = 20

		trigger = {
			any_owned_pop_group = {
				is_pop_category = bio_trophy_unemployment
			}

			planet_resource_compare = {
				resource = consumer_goods
				value >= 100
				type = produces
			}
		}
	}
	upgrades = {
		"building_avb_organic_sanctuary_5"
	}
}
building_avb_organic_sanctuary_5 = {
	base_buildtime = @avb_b5_time
	can_build = no
	icon = building_paradise_dome

	category = unity

	building_sets = {
		urban
		unity
	}

	potential = {
		exists = owner
		owner = {
			has_valid_civic = civic_machine_servitor

		}
	}

	destroy_trigger = {
		exists = owner
		NOT = { owner = { has_valid_civic = civic_machine_servitor } }
	}

	convert_to = {
		building_avb_residence_5
		building_avb_communal_housing_5
	}

	resources = {
		category = planet_buildings
		cost = {
			minerals = @avb_b5_minerals
			exotic_gases = @avb_b5_rare_cost
		}
		upkeep = {
			energy = @avb_b5_upkeep
			exotic_gases = @avb_b5_rare_upkeep
		}
	}

	planet_modifier = {
		job_bio_trophy_add = 7500
	}

	triggered_desc = {
		text = job_bio_trophy_effect_desc
	}

	prerequisites = { "tech_avb_residence_5" }

	show_tech_unlock_if = {
		owner = { has_valid_civic = civic_machine_servitor }
	}

	ai_weight_coefficient = 1.2

	# Here we try to adress the second issue that the AI cant evaluate the pop job output of the bio trophy given the happiness trigger that was put inplace to guard against players exploiting bio trophies

	#science
	ai_resource_production = {
		unity = 20
		physics_research = 20

		trigger = {
			any_owned_pop_group = {
				is_pop_category = bio_trophy_unemployment
			}

			planet_resource_compare = {
				resource = physics_research
				value >= 100
				type = produces
			}
		}
	}

	#alloys
	ai_resource_production = {
		unity = 20
		alloys = 20

		trigger = {
			any_owned_pop_group = {
				is_pop_category = bio_trophy_unemployment
			}

			planet_resource_compare = {
				resource = alloys
				value >= 100
				type = produces
			}
		}
	}

	#cgs
	ai_resource_production = {
		unity = 20
		consumer_goods = 20

		trigger = {
			any_owned_pop_group = {
				is_pop_category = bio_trophy_unemployment
			}

			planet_resource_compare = {
				resource = consumer_goods
				value >= 100
				type = produces
			}
		}
	}
}
building_trophy_vault = {
	base_buildtime = @b2_time
	planet_limit = 1
	category = unity
	icon = building_autocurating_vault

	building_sets = {
		unity
	}

	potential = {
		exists = owner
		is_special_colony_type = no
		owner = {
			has_valid_civic = civic_machine_servitor
		}
	}

	allow = {
	}

	destroy_trigger = {
		exists = owner
		OR = {
			has_modifier = slave_colony
			owner = {
				NOT = {
					has_valid_civic = civic_machine_servitor
				}
			}
		}
	}

	convert_to = {
		building_autocurating_vault
		building_citadel_of_faith
		building_alpha_hub
		building_corporate_vault
	}

	resources = {
		category = planet_buildings
		cost = {
			minerals = @b2_minerals
			rare_crystals = @b2_rare_cost
		}
		upkeep = {
			energy = @b2_upkeep
			rare_crystals = @b2_rare_upkeep
		}
	}

	planet_modifier = {
		planet_bio_trophies_unity_produces_add = 2
		planet_bio_trophies_consumer_goods_upkeep_add = 1
		pop_cat_bio_trophy_happiness = 0.10
	}

	prerequisites = {
		"tech_autocurating_vault"
	}

	show_tech_unlock_if = {
		has_valid_civic = civic_machine_servitor
	}
	upgrades = {
		building_avb_trophy_vault_2
	}
}
building_avb_trophy_vault_2 = {
	base_buildtime = @avb_b3_time
	category = unity
	can_build = no
	icon = building_avb_autocurating_vault_2 

	building_sets = {
		unity
	}

	potential = {
		exists = owner
		is_special_colony_type = no
		owner = {
			has_valid_civic = civic_machine_servitor
		}
	}

	allow = {
	}

	destroy_trigger = {
		exists = owner
		OR = {
			has_modifier = slave_colony
			owner = {
				NOT = {
					has_valid_civic = civic_machine_servitor
				}
			}
		}
	}

	convert_to = {
		building_avb_citadel_of_faith_2
		building_avb_autocurating_vault_2
		building_avb_alpha_hub_2
		building_avb_corporate_vault_2
	}

	resources = {
		category = planet_buildings
		cost = {
			minerals = @avb_b3_minerals
			rare_crystals = @avb_b2_rare_cost
		}
		upkeep = {
			energy = @avb_b2_upkeep
			rare_crystals = @avb_b2_rare_upkeep
		}
	}

	planet_modifier = {
		planet_bio_trophies_unity_produces_add = 3
		planet_bio_trophies_consumer_goods_upkeep_add = 1.5
		pop_cat_bio_trophy_happiness = 0.15
	}

	prerequisites = {
		"tech_avb_autocurating_vault_2"
	}

	show_tech_unlock_if = {
		has_valid_civic = civic_machine_servitor
	}
}

# Archaeotech
building_league_offices = {
	base_buildtime = @b2_time
	empire_limit = {
		base = 1
	}

	category = unity

	building_sets = {
		unity
	}

	potential = {
		exists = owner
		owner = {
			has_technology = tech_secrets_league
		}
		NOT = { has_modifier = slave_colony }
	}

	allow = {
		has_major_upgraded_capital = yes
	}

	destroy_trigger = {
		has_modifier = slave_colony
	}

	resources = {
		category = planet_buildings
		cost = {
			minerals = @b2_minerals
			rare_crystals = @b2_rare_cost
			minor_artifacts = 30
		}
		upkeep = {
			energy = @b2_upkeep
			rare_crystals = @b2_rare_upkeep
		}
		cost = {
			trigger = {
				owner = { is_wilderness_empire = yes }
			}
			biomass = @b3_biomass
		}
	}

	inline_script = {
		script = buildings/on_all_wilderness_buildings_districts
	}

	country_modifier = {
		country_edict_fund_add = 50
	}

	triggered_country_modifier = {
		potential = {
			owner = { has_ascension_perk = ap_archaeoengineers }
		}
		country_edict_fund_add = 50
	}

	planet_modifier = {
		planet_bureaucrats_unity_produces_add = 1
	}

	triggered_desc = {
		text = building_league_offices_effect
	}

	inline_script = {
		script = jobs/unity_jobs_add
		AMOUNT = @building_static_jobs
	}

	prerequisites = {
		"tech_secrets_league"
	}
	upgrades = {
		building_avb_league_offices_2
	}
}
building_avb_league_offices_2 = {
	base_buildtime = @avb_b3_time

	can_build = no
	category = unity

	building_sets = {
		unity
	}
	potential = {
		avb_hg_changes = yes
		exists = owner
		owner = { has_technology = tech_avb_league_offices_2 }
		NOT = { has_modifier = slave_colony }
	}

	allow = {
		has_upgraded_capital_4 = yes
	}

	destroy_trigger = {
		has_modifier = slave_colony
	}

	resources = {
		category = planet_buildings
		cost = {
			minerals = @avb_b3_minerals
			rare_crystals = @avb_b3_rare_cost
			minor_artifacts = 60
		}
		upkeep = {
			energy = @avb_b3_upkeep
			rare_crystals = @avb_b3_rare_upkeep
		}
		cost = {
			trigger = {
				owner = { is_wilderness_empire = yes }
			}
			biomass = @avb_b3_biomass
		}
	}

	inline_script = {
		script = buildings/on_all_wilderness_buildings_districts
	}
	country_modifier = {
		country_edict_fund_add = 100
	}

	triggered_country_modifier = {
		potential = {
			owner = { has_ascension_perk = ap_archaeoengineers }
		}
		country_edict_fund_add = 100
	}

	planet_modifier = {
		planet_bureaucrats_unity_produces_add = 1.5
	}

	triggered_desc = {
		text = building_league_offices_effect
	}

	inline_script = {
		script = jobs/unity_jobs_add
		AMOUNT = 400
	}

	prerequisites = {
		"tech_avb_league_offices_2"
	}
}
