#############
# Unity buildings
#############

#Regular
building_avb_monument_4 = {
	base_buildtime = @avb_u4_time
	can_build = no

	category = unity

	potential = {
		exists = owner
		NOT = { has_modifier = slave_colony }
		owner = {
			NOR = {
				is_gestalt = yes
				is_megacorp = yes
				is_memorialist_empire = yes
			}
		}
		owner = {
			is_ai = no
		}
	}

	allow = {
		has_fully_upgraded_capital = yes
	}

	destroy_trigger = {
		exists = owner
		OR = {
			has_modifier = slave_colony
			owner = {
				OR = {
					is_gestalt = yes
					is_megacorp = yes
					is_memorialist_empire = yes
				}
			}
		}
	}

	convert_to = {
		building_avb_monument_corp_4
		building_avb_monument_hive_4
		building_avb_monument_machine_4
		building_avb_monument_memorial_4
	}

	resources = {
		category = planet_buildings
		produces = {
			trigger = { exists = owner }
			unity = 4
			multiplier = owner.trigger:num_ascension_perks
		}
		cost = {
			minerals = @avb_u4_minerals
		}
	}

	planet_modifier = {
		planet_jobs_unity_produces_mult = 0.2
		job_culture_worker_add = @avb_u4_jobs
	}

	triggered_desc = {
		text = building_avb_monument_effect_4
	}

	triggered_desc = {
		text = job_culture_worker_effect_desc
	}

	prerequisites = {
		"tech_avb_monument_4"
	}

	show_tech_unlock_if = {
		is_gestalt = no
		is_megacorp = no
		is_memorialist_empire = no
	}
	upgrades = {
		building_avb_monument_5
	}
}
building_avb_monument_5 = {
	base_buildtime = @avb_u5_time
	can_build = no

	category = unity

	potential = {
		exists = owner
		NOT = { has_modifier = slave_colony }
		owner = {
			NOR = {
				is_gestalt = yes
				is_megacorp = yes
				is_memorialist_empire = yes
			}
		}
	}

	allow = {
		has_upgraded_capital_4 = yes
	}

	destroy_trigger = {
		exists = owner
		OR = {
			has_modifier = slave_colony
			owner = {
				OR = {
					is_gestalt = yes
					is_megacorp = yes
					is_memorialist_empire = yes
				}
			}
		}
	}

	convert_to = {
		building_avb_monument_corp_5
		building_avb_monument_hive_5
		building_avb_monument_machine_5
		building_avb_monument_memorial_5
	}

	resources = {
		category = planet_buildings
		produces = {
			trigger = { exists = owner }
			unity = 5
			multiplier = owner.trigger:num_ascension_perks
		}
		cost = {
			minerals = @avb_u5_minerals
		}
	}

	planet_modifier = {
		planet_jobs_unity_produces_mult = 0.25
		job_culture_worker_add = @avb_u5_jobs
	}
	triggered_desc = {
		text = building_avb_monument_effect_5
	}

	triggered_desc = {
		text = job_culture_worker_effect_desc
	}

	prerequisites = {
		"tech_avb_monument_5"
	}

	show_tech_unlock_if = {
		is_gestalt = no
		is_megacorp = no
		is_memorialist_empire = no
	}
	upgrades = {
		building_avb_monument_6
	}
}
building_avb_monument_6 = {
	base_buildtime = @avb_u6_time
	can_build = no

	category = unity

	potential = {
		exists = owner
		NOT = { has_modifier = slave_colony }
		owner = {
			NOR = {
				is_gestalt = yes
				is_megacorp = yes
				is_memorialist_empire = yes
			}
		}
	}

	allow = {
		has_upgraded_capital_5 = yes
	}

	destroy_trigger = {
		exists = owner
		OR = {
			has_modifier = slave_colony
			owner = {
				OR = {
					is_gestalt = yes
					is_megacorp = yes
					is_memorialist_empire = yes
				}
			}
		}
	}

	convert_to = {
		building_avb_monument_corp_6
		building_avb_monument_hive_6
		building_avb_monument_machine_6
		building_avb_monument_memorial_6
	}

	resources = {
		category = planet_buildings
		produces = {
			trigger = { exists = owner }
			unity = 6
			multiplier = owner.trigger:num_ascension_perks
		}
		cost = {
			minerals = @avb_u6_minerals
		}
	}

	planet_modifier = {
		planet_jobs_unity_produces_mult = 0.3
		job_culture_worker_add = @avb_u6_jobs
	}

	triggered_desc = {
		text = building_avb_monument_effect_6
	}

	triggered_desc = {
		text = job_culture_worker_effect_desc
	}

	prerequisites = {
		"tech_avb_monument_6"
	}

	show_tech_unlock_if = {
		is_gestalt = no
		is_megacorp = no
		is_memorialist_empire = no
	}
}

##################
# Bureaucrats
##################

building_avb_bureaucratic_4 = {
	base_buildtime = @avb_u4_time
	can_build = no

	category = unity

	potential = {
		exists = owner
		owner = {
			is_regular_empire = yes
			is_spiritualist = no
			has_make_spiritualist_perk = no
		}
		NOT = { has_modifier = slave_colony }
	}

	allow = {
		has_major_upgraded_capital = yes
	}

	destroy_trigger = {
		exists = owner
		owner = {
			OR = {
				is_gestalt = yes
				is_spiritualist = yes
				has_make_spiritualist_perk = yes
			}
		}
	}

	convert_to = {
		building_avb_hive_unity_4
		building_avb_machine_unity_4
		building_avb_temple_4
		building_avb_death_temple_4
	}

	resources = {
		category = planet_buildings
		cost = {
			minerals = @avb_u4_minerals
			rare_crystals = @avb_u4_rare_cost
		}
		upkeep = {
			energy = @avb_u4_upkeep
			rare_crystals = @avb_u4_rare_upkeep
		}
	}

	
	inline_script = {
		script = unity_buildings/avb_bureaucratic
		job_add = 8
	}

	prerequisites = {
		"tech_avb_bureaucratic_4"
	}

	show_tech_unlock_if = {
		is_regular_empire = yes
		is_spiritualist = no
		has_make_spiritualist_perk = no
	}
	upgrades = {
		building_avb_bureaucratic_5
	}
}

building_avb_bureaucratic_5 = {
	base_buildtime = @avb_u5_time
	can_build = no

	category = unity

	potential = {
		exists = owner
		owner = {
			is_regular_empire = yes
			is_spiritualist = no
			has_make_spiritualist_perk = no
		}
		NOT = { has_modifier = slave_colony }
	}

	allow = {
		has_fully_upgraded_capital = yes
	}

	destroy_trigger = {
		exists = owner
		owner = {
			OR = {
				is_gestalt = yes
				is_spiritualist = yes
				has_make_spiritualist_perk = yes
			}
		}
	}

	convert_to = {
		building_avb_temple_5
		building_avb_hive_unity_5
		building_avb_machine_unity_5
		building_avb_death_temple_5
	}

	resources = {
		category = planet_buildings
		cost = {
			minerals = @avb_u5_minerals
			rare_crystals = @avb_u5_rare_cost
		}
		upkeep = {
			energy = @avb_u5_upkeep
			rare_crystals = @avb_u5_rare_upkeep
		}
	}

	inline_script = {
		script = unity_buildings/avb_bureaucratic
		job_add = 10
	}

	prerequisites = {
		"tech_avb_bureaucratic_5"
	}

	show_tech_unlock_if = {
		is_regular_empire = yes
		is_spiritualist = no
		has_make_spiritualist_perk = no
	}
	upgrades = {
		building_avb_bureaucratic_6
	}
}

building_avb_bureaucratic_6 = {
	base_buildtime = @avb_u6_time
	can_build = no

	category = unity

	potential = {
		exists = owner
		owner = {
			is_regular_empire = yes
			is_spiritualist = no
			has_make_spiritualist_perk = no
		}
		NOT = { has_modifier = slave_colony }
	}

	allow = {
		has_upgraded_capital_4 = yes
	}

	destroy_trigger = {
		exists = owner
		owner = {
			OR = {
				is_gestalt = yes
				is_spiritualist = yes
				has_make_spiritualist_perk = yes
			}
		}
	}

	convert_to = {
		building_avb_temple_6
		building_avb_hive_unity_6
		building_avb_machine_unity_6
		building_avb_death_temple_6
	}

	resources = {
		category = planet_buildings
		cost = {
			minerals = @avb_u6_minerals
			rare_crystals = @avb_u6_rare_cost
		}
		upkeep = {
			energy = @avb_u6_upkeep
			rare_crystals = @avb_u6_rare_upkeep
		}
	}

	inline_script = {
		script = unity_buildings/avb_bureaucratic
		job_add = 12
	}
	prerequisites = {
		"tech_avb_bureaucratic_6"
	}

	show_tech_unlock_if = {
		is_regular_empire = yes
		is_spiritualist = no
		has_make_spiritualist_perk = no
	}
}
#Spiritualists
building_avb_temple_4 = {
	base_buildtime = @avb_u4_time
	can_build = no

	category = unity

	potential = {
		exists = owner
		owner = {
			OR = {
				is_spiritualist = yes
				AND = {
					is_gestalt = no
					has_make_spiritualist_perk = yes
				}
			}
		}
		NOT = { has_modifier = slave_colony }
	}

	allow = {
		has_fully_upgraded_capital = yes
	}

	destroy_trigger = {
		exists = owner
		OR = {
			owner = {
				OR = {
					AND = {
						is_spiritualist = no
						has_make_spiritualist_perk = no
					}
					is_gestalt = yes
				}
			}
			has_modifier = slave_colony
		}
	}

	convert_to = {
		building_avb_bureaucratic_4
		building_avb_hive_unity_4
		building_avb_machine_unity_4
		building_avb_death_temple_4
	}

	resources = {
		category = planet_buildings
		cost = {
			minerals = @avb_u4_minerals
			rare_crystals = @avb_u4_rare_cost
		}
		upkeep = {
			energy = @avb_u4_upkeep
			rare_crystals = @avb_u4_rare_upkeep
		}
	}
	inline_script = {
		script = unity_buildings/avb_temple
		priest = 4
		job_add = 4
		modifier = 0.2
	}
	prerequisites = {
		"tech_avb_temple_4"
	}

	show_tech_unlock_if = {
		OR = {
			is_spiritualist = yes
			AND = {
				is_gestalt = no
				has_make_spiritualist_perk = yes
			}
		}
	}
	upgrades = {
		"building_avb_temple_5"
	}
}
building_avb_temple_5 = {
	base_buildtime = @avb_u5_time
	can_build = no

	category = unity

	potential = {
		exists = owner
		owner = {
			OR = {
				is_spiritualist = yes
				AND = {
					is_gestalt = no
					has_make_spiritualist_perk = yes
				}
			}
		}
		NOT = { has_modifier = slave_colony }
	}

	allow = {
		has_upgraded_capital_4 = yes
	}

	destroy_trigger = {
		exists = owner
		OR = {
			owner = {
				OR = {
					AND = {
						is_spiritualist = no
						has_make_spiritualist_perk = no
					}
					is_gestalt = yes
				}
			}
			has_modifier = slave_colony
		}
	}

	convert_to = {
		building_avb_bureaucratic_5
		building_avb_hive_unity_5
		building_avb_machine_unity_5
		building_avb_death_temple_5
	}

	resources = {
		category = planet_buildings
		cost = {
			minerals = @avb_u5_minerals
			rare_crystals = @avb_u5_rare_cost
		}
		upkeep = {
			energy = @avb_u5_upkeep
			rare_crystals = @avb_u5_rare_upkeep
		}
	}

	inline_script = {
		script = unity_buildings/avb_temple
		priest = 6
		job_add = 4
		modifier = 0.2
	}
	prerequisites = {
		"tech_avb_temple_5"
	}

	show_tech_unlock_if = {
		OR = {
			is_spiritualist = yes
			AND = {
				is_gestalt = no
				has_make_spiritualist_perk = yes
			}
		}
	}
	upgrades = {
		"building_avb_temple_6"
	}
}
building_avb_temple_6 = {
	base_buildtime = @avb_u6_time
	can_build = no

	category = unity

	potential = {
		exists = owner
		owner = {
			OR = {
				is_spiritualist = yes
				AND = {
					is_gestalt = no
					has_make_spiritualist_perk = yes
				}
			}
		}
		NOT = { has_modifier = slave_colony }
	}

	allow = {
		has_upgraded_capital_5 = yes
	}

	destroy_trigger = {
		exists = owner
		OR = {
			owner = {
				OR = {
					AND = {
						is_spiritualist = no
						has_make_spiritualist_perk = no
					}
					is_gestalt = yes
				}
			}
			has_modifier = slave_colony
		}
	}

	convert_to = {
		building_avb_bureaucratic_6
		building_avb_hive_unity_6
		building_avb_machine_unity_6
		building_avb_death_temple_6
	}

	resources = {
		category = planet_buildings
		cost = {
			minerals = @avb_u6_minerals
			rare_crystals = @avb_u6_rare_cost
		}
		upkeep = {
			energy = @avb_u6_upkeep
			rare_crystals = @avb_u6_rare_upkeep
		}
	}
	inline_script = {
		script = unity_buildings/avb_temple
		priest = 6
		job_add = 6
		modifier = 0.2
	}
	prerequisites = {
		"tech_avb_temple_6"
	}

	show_tech_unlock_if = {
		OR = {
			is_spiritualist = yes
			AND = {
				is_gestalt = no
				has_make_spiritualist_perk = yes
			}
		}
	}
}

##################
# Machine
##################

building_avb_machine_unity_4 = {
	base_buildtime = @avb_u4_time
	can_build = no
	icon = building_avb_monument_4

	category = unity

	potential = {
		exists = owner
		owner = {
			is_machine_empire = yes
			NOT = {
				has_valid_civic = civic_machine_servitor
			}
		}
	}

	allow = {
		has_major_upgraded_capital = yes
	}

	destroy_trigger = {
		exists = owner
		owner = {
			OR = {
				is_machine_empire = no
				has_valid_civic = civic_machine_servitor
			}
		}
	}

	convert_to = {
		building_avb_temple_4
		building_avb_hive_unity_4
		building_avb_bureaucratic_4
		building_avb_death_temple_4
	}

	resources = {
		category = planet_buildings
		cost = {
			minerals = @avb_u4_minerals
			rare_crystals = @avb_u4_rare_cost
		}
		upkeep = {
			energy = @avb_u4_upkeep
			rare_crystals = @avb_u4_rare_upkeep
		}
	}

	inline_script = {
		script = unity_buildings/avb_machine_node
		coordinator = 8
	}

	prerequisites = {
		"tech_avb_bureaucratic_4"
	}

	show_tech_unlock_if = {
		is_machine_empire = yes
		NOT = {
			has_valid_civic = civic_machine_servitor
		}
	}
	upgrades = {
		building_avb_machine_unity_5
	}
}
building_avb_machine_unity_5 = {
	base_buildtime = @avb_u5_time
	can_build = no
	icon = building_avb_monument_5

	category = unity

	potential = {
		exists = owner
		owner = {
			is_machine_empire = yes
			NOT = {
				has_valid_civic = civic_machine_servitor
			}
		}
	}

	allow = {
		has_fully_upgraded_capital = yes
	}

	destroy_trigger = {
		exists = owner
		owner = {
			OR = {
				is_machine_empire = no
				has_valid_civic = civic_machine_servitor
			}
		}
	}

	convert_to = {
		building_avb_temple_5
		building_avb_hive_unity_5
		building_avb_bureaucratic_5
		building_avb_death_temple_5
	}

	resources = {
		category = planet_buildings
		cost = {
			minerals = @avb_u5_minerals
			rare_crystals = @avb_u5_rare_cost
		}
		upkeep = {
			energy = @avb_u5_upkeep
			rare_crystals = @avb_u5_rare_upkeep
		}
	}

	
	inline_script = {
		script = unity_buildings/avb_machine_node
		coordinator = 10
	}


	prerequisites = {
		"tech_avb_bureaucratic_5"
	}

	show_tech_unlock_if = {
		is_machine_empire = yes
		NOT = {
			has_valid_civic = civic_machine_servitor
		}
	}
	upgrades = {
		building_avb_machine_unity_6
	}
}
building_avb_machine_unity_6 = {
	base_buildtime = @avb_u6_time
	can_build = no
	icon = building_avb_monument_6

	category = unity

	potential = {
		exists = owner
		owner = {
			is_machine_empire = yes
			NOT = {
				has_valid_civic = civic_machine_servitor
			}
		}
	}

	allow = {
		has_upgraded_capital_4 = yes
	}

	destroy_trigger = {
		exists = owner
		owner = {
			OR = {
				is_machine_empire = no
				has_valid_civic = civic_machine_servitor
			}
		}
	}

	convert_to = {
		building_avb_temple_6
		building_avb_hive_unity_6
		building_avb_bureaucratic_6
		building_avb_death_temple_6
	}

	resources = {
		category = planet_buildings
		cost = {
			minerals = @avb_u6_minerals
			rare_crystals = @avb_u6_rare_cost
		}
		upkeep = {
			energy = @avb_u6_upkeep
			rare_crystals = @avb_u6_rare_upkeep
		}
	}

	inline_script = {
		script = unity_buildings/avb_machine_node
		coordinator = 12
	}


	prerequisites = {
		"tech_avb_bureaucratic_6"
	}

	show_tech_unlock_if = {
		is_machine_empire = yes
		NOT = {
			has_valid_civic = civic_machine_servitor
		}
	}
}
##################
# Hive Minds
##################
building_avb_hive_unity_4 = {
	base_buildtime = @avb_u4_time
	can_build = no

	category = unity

	potential = {
		exists = owner
		owner = {
			is_hive_empire = yes
		}
	}

	allow = {
		has_fully_upgraded_capital = yes
	}

	destroy_trigger = {
		exists = owner
		owner = { is_hive_empire = no }
	}

	convert_to = {
		building_avb_temple_4
		building_avb_machine_unity_4
		building_avb_bureaucratic_4
		building_avb_death_temple_4
	}

	resources = {
		category = planet_buildings
		cost = {
			minerals = @avb_u4_minerals
			exotic_gases = @avb_u4_rare_cost
		}
		upkeep = {
			energy = @avb_u4_upkeep
			exotic_gases = @avb_u4_rare_upkeep
		}
		upkeep = {
			trigger = {
				exists = owner
				owner = {
					has_edict = synaptic_reinforcement
				}
			}
			energy = 2
		}
	}

	planet_modifier = {
		job_synapse_drone_add = 8
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				has_active_tradition = tr_domination_synaptic_extensions
			}
		}
		modifier = {
			planet_housing_add = 2
		}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				has_edict = synaptic_reinforcement
			}
		}
		job_maintenance_drone_add = 1
	}

	prerequisites = {
		tech_avb_hive_unity_4
	}

	triggered_desc = {
		text = job_synapse_drone_effect_desc
	}

	triggered_desc = {
		trigger = {
			exists = owner
			owner = {
				has_edict = synaptic_reinforcement
			}
		}
		text = job_maintenance_drone_effect_desc
	}
	upgrades = {
		"building_avb_hive_unity_5"
	}
}
building_avb_hive_unity_5 = {
	base_buildtime = @avb_u5_time
	can_build = no

	category = unity

	potential = {
		exists = owner
		owner = {
			is_hive_empire = yes
		}
	}

	allow = {
		has_upgraded_capital_4 = yes
	}

	destroy_trigger = {
		exists = owner
		owner = { is_hive_empire = no }
	}

	convert_to = {
		building_avb_temple_5
		building_avb_machine_unity_5
		building_avb_bureaucratic_5
		building_avb_death_temple_5
	}

	resources = {
		category = planet_buildings
		cost = {
			minerals = @avb_u5_minerals
			exotic_gases = @avb_u5_rare_cost
		}
		upkeep = {
			energy = @avb_u5_upkeep
			exotic_gases = @avb_u5_rare_upkeep
		}
		upkeep = {
			trigger = {
				exists = owner
				owner = {
					has_edict = synaptic_reinforcement
				}
			}
			energy = 2
		}
	}

	planet_modifier = {
		job_synapse_drone_add = 8
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				has_active_tradition = tr_domination_synaptic_extensions
			}
		}
		modifier = {
			planet_housing_add = 2
		}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				has_edict = synaptic_reinforcement
			}
		}
		job_maintenance_drone_add = 1
	}

	prerequisites = {
		tech_avb_hive_unity_5
	}

	triggered_desc = {
		text = job_synapse_drone_effect_desc
	}

	triggered_desc = {
		trigger = {
			exists = owner
			owner = {
				has_edict = synaptic_reinforcement
			}
		}
		text = job_maintenance_drone_effect_desc
	}
	upgrades = {
		"building_avb_hive_unity_6"
	}
}
building_avb_hive_unity_6 = {
	base_buildtime = @avb_u6_time
	can_build = no

	category = unity

	potential = {
		exists = owner
		owner = {
			is_hive_empire = yes
		}
	}

	allow = {
		has_upgraded_capital_4 = yes
	}

	destroy_trigger = {
		exists = owner
		owner = { is_hive_empire = no }
	}

	convert_to = {
		building_avb_temple_6
		building_avb_machine_unity_6
		building_avb_bureaucratic_6
		building_avb_death_temple_6
	}

	resources = {
		category = planet_buildings
		cost = {
			minerals = @avb_u6_minerals
			exotic_gases = @avb_u6_rare_cost
		}
		upkeep = {
			energy = @avb_u6_upkeep
			exotic_gases = @avb_u6_rare_upkeep
		}
		upkeep = {
			trigger = {
				has_z_expanded_mod = no
				exists = owner
				owner = {
					has_edict = synaptic_reinforcement
				}
			}
			energy = 2
		}
	}

	planet_modifier = {
		job_synapse_drone_add = 12
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				has_active_tradition = tr_domination_synaptic_extensions
			}
		}
		modifier = {
			planet_housing_add = 2
		}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				has_edict = synaptic_reinforcement
			}
		}
		job_maintenance_drone_add = 1
	}

	prerequisites = {
		tech_avb_hive_unity_6
	}

	triggered_desc = {
		text = job_synapse_drone_effect_desc
	}

	triggered_desc = {
		trigger = {
			exists = owner
			owner = {
				has_edict = synaptic_reinforcement
			}
		}
		text = job_maintenance_drone_effect_desc
	}
}
#Death Cult
building_avb_death_temple_4 = {
	base_buildtime = @avb_u4_time
	can_build = no

	category = unity

	potential = {
		exists = owner
		owner = {
			is_death_cult_empire = yes
		}
		NOT = { has_modifier = slave_colony }
	}

	allow = {
		has_fully_upgraded_capital = yes
	}

	destroy_trigger = {
		exists = owner
		OR = {
			owner = { is_death_cult_empire = no }
			has_modifier = slave_colony
		}
	}

	convert_to = {
		building_avb_hive_unity_4
		building_avb_machine_unity_4
		building_avb_bureaucratic_4
		building_avb_temple_4
	}
	resources = {
		category = planet_buildings
		cost = {
			minerals = @avb_u4_minerals
			exotic_gases = @avb_u4_rare_cost
		}
		upkeep = {
			energy = @avb_u4_upkeep
			exotic_gases = @avb_u4_rare_upkeep
			volatile_motes = @avb_u4_rare_upkeep
		}
	}
	inline_script = {
		script = unity_buildings/avb_death_temple
		modifier = 0.2
		death_priest_base = 3
		mortal_initiate_base = 2
		death_priest_add = 1
		mortal_initiate_add = 2
		megacorp_job_add = 3
	}

	prerequisites = {
		"tech_avb_temple_4"
	}

	show_tech_unlock_if = {
		is_death_cult_empire = yes
	}
	upgrades = {
		building_avb_death_temple_5
	}
}
building_avb_death_temple_5 = {
	base_buildtime = @avb_u5_time
	can_build = no

	category = unity

	potential = {
		exists = owner
		owner = {
			is_death_cult_empire = yes
		}
		NOT = { has_modifier = slave_colony }
	}

	allow = {
		has_upgraded_capital_4 = yes
	}

	destroy_trigger = {
		exists = owner
		OR = {
			owner = { is_death_cult_empire = no }
			has_modifier = slave_colony
		}
	}

	convert_to = {
		building_avb_hive_unity_5
		building_avb_machine_unity_5
		building_avb_bureaucratic_5
		building_avb_temple_5
	}
	resources = {
		category = planet_buildings
		cost = {
			minerals = @avb_u5_minerals
			exotic_gases = @avb_u5_rare_cost
		}
		upkeep = {
			energy = @avb_u5_upkeep
			exotic_gases = @avb_u5_rare_upkeep
			volatile_motes = @avb_u5_rare_upkeep
		}
	}

	inline_script = {
		script = unity_buildings/avb_death_temple
		modifier = 0.25
		death_priest_base = 3
		mortal_initiate_base = 3
		death_priest_add = 2
		mortal_initiate_add = 2
		megacorp_job_add = 4
	}
	prerequisites = {
		"tech_avb_temple_5"
	}

	show_tech_unlock_if = {
		is_death_cult_empire = yes
	}
	upgrades = {
		building_avb_death_temple_6
	}
}
building_avb_death_temple_6 = {
	base_buildtime = @avb_u6_time
	can_build = no

	category = unity

	potential = {
		exists = owner
		owner = {
			is_death_cult_empire = yes
		}
		NOT = { has_modifier = slave_colony }
	}

	allow = {
		has_upgraded_capital_5 = yes
	}

	destroy_trigger = {
		exists = owner
		OR = {
			owner = { is_death_cult_empire = no }
			has_modifier = slave_colony
		}
	}

	convert_to = {
		building_avb_hive_unity_6
		building_avb_machine_unity_6
		building_avb_bureaucratic_6
		building_avb_temple_6
	}
	resources = {
		category = planet_buildings
		cost = {
			minerals = @avb_u6_minerals
			exotic_gases = @avb_u6_rare_cost
		}
		upkeep = {
			energy = @avb_u6_upkeep
			exotic_gases = @avb_u6_rare_upkeep
			volatile_motes = @avb_u6_rare_upkeep
		}
	}

	inline_script = {
		script = unity_buildings/avb_death_temple
		modifier = 0.3
		death_priest_base = 4
		mortal_initiate_base = 3
		death_priest_add = 2
		mortal_initiate_add = 3
		megacorp_job_add = 5
	}
	prerequisites = {
		"tech_avb_temple_6"
	}

	show_tech_unlock_if = {
		is_death_cult_empire = yes
	}
}

#Memorialist
building_avb_monument_memorial_4 = {
	base_buildtime = @avb_u4_time
	can_build = no
	category = unity

	potential = {
		exists = owner
		NOT = { has_modifier = slave_colony }
		owner = {
			is_memorialist_empire = yes
		}
	}

	allow = {
		has_fully_upgraded_capital = yes
	}

	destroy_trigger = {
		exists = owner
		OR = {
			has_modifier = slave_colony
			owner = { is_memorialist_empire = no }
		}
	}

	convert_to = {
		building_avb_monument_corp_4
		building_avb_monument_hive_4
		building_avb_monument_machine_4
		building_avb_monument_4
	}

	resources = {
		category = planet_buildings
		produces = {
			trigger = { exists = owner }
			unity = 4
			multiplier = owner.trigger:num_ascension_perks
		}
		cost = {
			minerals = @avb_u4_minerals
			exotic_gases = @avb_u4_rare_cost
		}
		upkeep = {
			minerals = @avb_u4_upkeep
			exotic_gases = @avb_u4_rare_upkeep
		}
	}

	inline_script = {
		script = unity_buildings/avb_memorialist
		modifier = 0.2
		chronicle = 8
	}
	prerequisites = {
		"tech_avb_monument_4"
	}

	show_tech_unlock_if = {
		is_memorialist_empire = yes
	}
	upgrades = {
		building_avb_monument_memorial_5
	}
}
building_avb_monument_memorial_5 = {
	base_buildtime = @avb_u5_time
	can_build = no
	category = unity

	potential = {
		exists = owner
		NOT = { has_modifier = slave_colony }
		owner = {
			is_memorialist_empire = yes
		}
	}

	allow = {
		has_upgraded_capital_4 = yes
	}

	destroy_trigger = {
		exists = owner
		OR = {
			has_modifier = slave_colony
			owner = { is_memorialist_empire = no }
		}
	}

	convert_to = {
		building_avb_monument_corp_5
		building_avb_monument_hive_5
		building_avb_monument_machine_5
		building_avb_monument_5
	}

	resources = {
		category = planet_buildings
		produces = {
			trigger = { exists = owner }
			unity = 5
			multiplier = owner.trigger:num_ascension_perks
		}
		cost = {
			minerals = @avb_u5_minerals
			exotic_gases = @avb_u5_rare_cost
		}
		upkeep = {
			minerals = @avb_u5_upkeep
			exotic_gases = @avb_u5_rare_upkeep
		}
	}

	triggered_desc = {
		text = building_avb_monument_effect_5
	}
	inline_script = {
		script = unity_buildings/avb_memorialist
		modifier = 0.25
		chronicle = 10
	}

	prerequisites = {
		"tech_avb_monument_5"
	}

	show_tech_unlock_if = {
		is_memorialist_empire = yes
	}
	upgrades = {
		building_avb_monument_memorial_6
	}
}
building_avb_monument_memorial_6 = {
	base_buildtime = @avb_u6_time
	can_build = no
	category = unity

	potential = {
		exists = owner
		NOT = { has_modifier = slave_colony }
		owner = {
			is_memorialist_empire = yes
		}
	}

	allow = {
		has_upgraded_capital_5 = yes
	}

	destroy_trigger = {
		exists = owner
		OR = {
			has_modifier = slave_colony
			owner = { is_memorialist_empire = no }
		}
	}

	convert_to = {
		building_avb_monument_corp_6
		building_avb_monument_hive_6
		building_avb_monument_machine_6
		building_avb_monument_6
	}

	resources = {
		category = planet_buildings
		produces = {
			trigger = { exists = owner }
			unity = 6
			multiplier = owner.trigger:num_ascension_perks
		}
		cost = {
			minerals = @avb_u6_minerals
			exotic_gases = @avb_u6_rare_cost
		}
		upkeep = {
			minerals = @avb_u6_upkeep
			exotic_gases = @avb_u6_rare_upkeep
		}
	}

	inline_script = {
		script = unity_buildings/avb_memorialist
		modifier = 0.3
		chronicle = 12
	}
	triggered_desc = {
		text = building_avb_monument_effect_6
	}

	prerequisites = {
		"tech_avb_monument_6"
	}

	show_tech_unlock_if = {
		is_memorialist_empire = yes
	}
}

#############
# Monument buildings
#############

#Megacorp
building_avb_monument_corp_4 = {
	base_buildtime = @avb_u4_time
	can_build = no
	icon = building_avb_monument_4

	category = unity

	potential = {
		exists = owner
		NOT = { has_modifier = slave_colony }
		owner = {
			is_megacorp = yes
		}
	}

	allow = {
		has_fully_upgraded_capital = yes
	}

	destroy_trigger = {
		exists = owner
		OR = {
			has_modifier = slave_colony
			owner = {
				OR = {
					is_megacorp = no
					is_memorialist_empire = yes
				}
			}
		}
	}

	convert_to = {
		building_avb_monument_4
		building_avb_monument_hive_4
		building_avb_monument_machine_4
		building_avb_monument_memorial_4
	}

	resources = {
		category = planet_buildings
		produces = {
			trigger = { exists = owner }
			unity = 4
			multiplier = owner.trigger:num_ascension_perks
		}
		cost = {
			minerals = @avb_u4_minerals
		}
	}

	planet_modifier = {
		planet_jobs_unity_produces_mult = 0.2
		job_culture_worker_add = 8
	}

	triggered_desc = {
		text = building_avb_monument_effect_4
	}

	triggered_desc = {
		text = job_culture_worker_effect_desc
	}

	prerequisites = {
		"tech_avb_monument_4"
	}

	show_tech_unlock_if = {
		is_megacorp = yes
	}
	upgrades = {
		"building_avb_monument_corp_5"
	}
}
building_avb_monument_corp_5 = {
	base_buildtime = @avb_u5_time
	can_build = no
	icon = building_avb_monument_5

	category = unity

	potential = {
		exists = owner
		NOT = { has_modifier = slave_colony }
		owner = {
			is_megacorp = yes
		}
	}

	allow = {
		has_fully_upgraded_capital = yes
	}

	destroy_trigger = {
		exists = owner
		OR = {
			has_modifier = slave_colony
			owner = {
				OR = {
					is_megacorp = no
					is_memorialist_empire = yes
				}
			}
		}
	}

	convert_to = {
		building_avb_monument_5
		building_avb_monument_hive_5
		building_avb_monument_machine_5
		building_avb_monument_memorial_5
	}

	resources = {
		category = planet_buildings
		produces = {
			trigger = { exists = owner }
			unity = 5
			multiplier = owner.trigger:num_ascension_perks
		}
		cost = {
			minerals = @avb_u5_minerals
		}
	}

	planet_modifier = {
		planet_jobs_unity_produces_mult = 0.25
		job_culture_worker_add = 10
	}

	triggered_desc = {
		text = building_avb_monument_effect_5
	}

	triggered_desc = {
		text = job_culture_worker_effect_desc
	}

	prerequisites = {
		"tech_avb_monument_5"
	}

	show_tech_unlock_if = {
		is_megacorp = yes
	}
	upgrades = {
		"building_avb_monument_corp_6"
	}
}
building_avb_monument_corp_6 = {
	base_buildtime = @avb_u6_time
	can_build = no
	icon = building_avb_monument_6

	category = unity

	potential = {
		exists = owner
		NOT = { has_modifier = slave_colony }
		owner = {
			is_megacorp = yes
		}
	}

	allow = {
		has_upgraded_capital_4 = yes
	}

	destroy_trigger = {
		exists = owner
		OR = {
			has_modifier = slave_colony
			owner = {
				OR = {
					is_megacorp = no
					is_memorialist_empire = yes
				}
			}
		}
	}

	convert_to = {
		building_avb_monument_6
		building_avb_monument_hive_6
		building_avb_monument_machine_6
		building_avb_monument_memorial_6
	}

	resources = {
		category = planet_buildings
		produces = {
			trigger = { exists = owner }
			unity = 6
			multiplier = owner.trigger:num_ascension_perks
		}
		cost = {
			minerals = @avb_u6_minerals
		}
	}

	planet_modifier = {
		planet_jobs_unity_produces_mult = 0.3
		job_culture_worker_add = 12
	}

	triggered_desc = {
		text = building_avb_monument_effect_6
	}

	triggered_desc = {
		text = job_culture_worker_effect_desc
	}

	prerequisites = {
		"tech_avb_monument_6"
	}

	show_tech_unlock_if = {
		is_megacorp = yes
	}
}
#Hive
building_avb_monument_hive_4 = {
	base_buildtime = @avb_u4_time
	can_build = no
	icon = building_avb_holo_theatre_4

	category = unity

	potential = {
		exists = owner
		NOT = { has_modifier = slave_colony }
		owner = {
			is_hive_empire = yes
			is_memorialist_empire = no
		}
	}

	allow = {
		has_fully_upgraded_capital = yes
	}

	destroy_trigger = {
		exists = owner
		OR = {
			has_modifier = slave_colony
			owner = {
				OR = {
					is_hive_empire = no
					is_memorialist_empire = yes
				}
			}
		}
	}

	convert_to = {
		building_avb_monument_corp_4
		building_avb_monument_4
		building_avb_monument_machine_4
		building_avb_monument_memorial_4
	}

	resources = {
		category = planet_buildings
		produces = {
			trigger = { exists = owner }
			unity = 4
			multiplier = owner.trigger:num_ascension_perks
		}
		cost = {
			minerals = @avb_u4_minerals
		}
	}

	planet_modifier = {
		planet_jobs_unity_produces_mult = 0.2
		job_evaluator_add = 8
	}

	triggered_desc = {
		text = building_avb_monument_effect_4
	}

	triggered_desc = {
		text = job_evaluator_effect_desc
	}

	prerequisites = {
		"tech_avb_monument_4"
	}

	show_tech_unlock_if = {
		is_hive_empire = yes
		is_memorialist_empire = no
	}
	upgrades = {
		building_avb_monument_hive_5
	}
}
building_avb_monument_hive_5 = {
	base_buildtime = @avb_u5_time
	can_build = no
	icon = building_avb_holo_theatre_5

	category = unity

	potential = {
		exists = owner
		NOT = { has_modifier = slave_colony }
		owner = {
			is_hive_empire = yes
			is_memorialist_empire = no
		}
	}

	allow = {
		has_fully_upgraded_capital = yes
	}

	destroy_trigger = {
		exists = owner
		OR = {
			has_modifier = slave_colony
			owner = {
				OR = {
					is_hive_empire = no
					is_memorialist_empire = yes
				}
			}
		}
	}

	convert_to = {
		building_avb_monument_corp_5
		building_avb_monument_5
		building_avb_monument_machine_5
		building_avb_monument_memorial_5
	}

	resources = {
		category = planet_buildings
		produces = {
			trigger = { exists = owner }
			unity = 5
			multiplier = owner.trigger:num_ascension_perks
		}
		cost = {
			minerals = @avb_u5_minerals
		}
	}

	planet_modifier = {
		planet_jobs_unity_produces_mult = 0.25
		job_evaluator_add = 10
	}

	triggered_desc = {
		text = building_avb_monument_effect_5
	}

	triggered_desc = {
		text = job_evaluator_effect_desc
	}

	prerequisites = {
		"tech_avb_monument_5"
	}

	show_tech_unlock_if = {
		is_hive_empire = yes
		is_memorialist_empire = no
	}
	upgrades = {
		building_avb_monument_hive_6
	}
}
building_avb_monument_hive_6 = {
	base_buildtime = @avb_u6_time
	can_build = no
	icon = building_avb_holo_theatre_6

	category = unity

	potential = {
		exists = owner
		NOT = { has_modifier = slave_colony }
		owner = {
			is_hive_empire = yes
			is_memorialist_empire = no
		}
	}

	allow = {
		has_fully_upgraded_capital = yes
	}

	destroy_trigger = {
		exists = owner
		OR = {
			has_modifier = slave_colony
			owner = {
				OR = {
					is_hive_empire = no
					is_memorialist_empire = yes
				}
			}
		}
	}

	convert_to = {
		building_avb_monument_corp_6
		building_avb_monument_6
		building_avb_monument_machine_6
		building_avb_monument_memorial_6
	}

	resources = {
		category = planet_buildings
		produces = {
			trigger = { exists = owner }
			unity = 6
			multiplier = owner.trigger:num_ascension_perks
		}
		cost = {
			minerals = @avb_u6_minerals
		}
	}

	planet_modifier = {
		planet_jobs_unity_produces_mult = 0.3
		job_evaluator_add = 12
	}

	triggered_desc = {
		text = building_avb_monument_effect_6
	}

	triggered_desc = {
		text = job_evaluator_effect_desc
	}

	prerequisites = {
		"tech_avb_monument_6"
	}

	show_tech_unlock_if = {
		is_hive_empire = yes
		is_memorialist_empire = no
	}
}
#Machine
building_avb_monument_machine_4 = {
	base_buildtime = @avb_u4_time
	can_build = no
	icon = building_avb_holo_theatre_4

	category = unity

	potential = {
		exists = owner
		NOT = { has_modifier = slave_colony }
		owner = {
			is_machine_empire = yes
			is_memorialist_empire = no
		}
	}

	allow = {
		has_fully_upgraded_capital = yes
	}

	destroy_trigger = {
		exists = owner
		OR = {
			has_modifier = slave_colony
			owner = {
				OR = {
					is_machine_empire = no
					is_memorialist_empire = yes
				}
			}
		}
	}

	convert_to = {
		building_avb_monument_corp_4
		building_avb_monument_hive_4
		building_avb_monument_4
		building_avb_monument_memorial_4
	}

	resources = {
		category = planet_buildings
		produces = {
			trigger = { exists = owner }
			unity = 4
			multiplier = owner.trigger:num_ascension_perks
		}
		cost = {
			minerals = @avb_u4_minerals
		}
	}

	planet_modifier = {
		planet_jobs_unity_produces_mult = 0.2
		job_evaluator_add = 8
	}

	triggered_desc = {
		text = building_avb_monument_effect_4
	}


	triggered_desc = {
		text = job_evaluator_effect_desc
	}

	prerequisites = {
		"tech_avb_monument_4"
	}

	show_tech_unlock_if = {
		is_machine_empire = yes
		is_memorialist_empire = no
	}
	upgrades = {
		building_avb_monument_machine_5
	}
}
building_avb_monument_machine_5 = {
	base_buildtime = @avb_u5_time
	can_build = no
	icon = building_avb_holo_theatre_5

	category = unity

	potential = {
		exists = owner
		NOT = { has_modifier = slave_colony }
		owner = {
			is_machine_empire = yes
			is_memorialist_empire = no
		}
	}

	allow = {
		has_upgraded_capital_4 = yes
	}

	destroy_trigger = {
		exists = owner
		OR = {
			has_modifier = slave_colony
			owner = {
				OR = {
					is_machine_empire = no
					is_memorialist_empire = yes
				}
			}
		}
	}

	convert_to = {
		building_avb_monument_corp_5
		building_avb_monument_hive_5
		building_avb_monument_5
		building_avb_monument_memorial_5
	}

	resources = {
		category = planet_buildings
		produces = {
			trigger = { exists = owner }
			unity = 5
			multiplier = owner.trigger:num_ascension_perks
		}
		cost = {
			minerals = @avb_u5_minerals
		}
	}

	planet_modifier = {
		planet_jobs_unity_produces_mult = 0.25
		job_evaluator_add = 10
	}

	triggered_desc = {
		text = building_avb_monument_effect_5
	}


	triggered_desc = {
		text = job_evaluator_effect_desc
	}

	prerequisites = {
		"tech_avb_monument_5"
	}

	show_tech_unlock_if = {
		is_machine_empire = yes
		is_memorialist_empire = no
	}
	upgrades = {
		building_avb_monument_machine_6
	}
}
building_avb_monument_machine_6 = {
	base_buildtime = @avb_u6_time
	can_build = no
	icon = building_avb_holo_theatre_6

	category = unity

	potential = {
		exists = owner
		NOT = { has_modifier = slave_colony }
		owner = {
			is_machine_empire = yes
			is_memorialist_empire = no
		}
	}

	allow = {
		has_upgraded_capital_5 = yes
	}

	destroy_trigger = {
		exists = owner
		OR = {
			has_modifier = slave_colony
			owner = {
				OR = {
					is_machine_empire = no
					is_memorialist_empire = yes
				}
			}
		}
	}

	convert_to = {
		building_avb_monument_corp_6
		building_avb_monument_hive_6
		building_avb_monument_6
		building_avb_monument_memorial_6
	}

	resources = {
		category = planet_buildings
		produces = {
			trigger = { exists = owner }
			unity = 6
			multiplier = owner.trigger:num_ascension_perks
		}
		cost = {
			minerals = @avb_u6_minerals
		}
	}

	planet_modifier = {
		planet_jobs_unity_produces_mult = 0.3
		job_evaluator_add = 12
	}

	triggered_desc = {
		text = building_avb_monument_effect_6
	}


	triggered_desc = {
		text = job_evaluator_effect_desc
	}

	prerequisites = {
		"tech_avb_monument_6"
	}

	show_tech_unlock_if = {
		is_machine_empire = yes
		is_memorialist_empire = no
	}
}
#Servitors
building_avb_organic_sanctuary_3 = {
	base_buildtime = @avb_u4_time
	can_build = no
	category = unity
	
	potential = {
		exists = owner
		owner = {	
			has_valid_civic = civic_machine_servitor
		}
	}

	destroy_trigger = {
		exists = owner
		NOT = { owner = { has_valid_civic = civic_machine_servitor } }
	}
	
	convert_to = {
		building_avb_residence_3
		building_avb_communal_housing_3
	}
		
	planet_modifier = {
		#planet_housing_add = 20
		job_bio_trophy_add = 30
		job_artisan_drone_add = 3
		job_maintenance_drone_add = 2
	}
	
	resources = {
		category = planet_buildings
		cost = {
			minerals = @avb_u4_minerals
			exotic_gases = @avb_u4_rare_cost
		}
		upkeep = {
			energy = @avb_u4_upkeep
			exotic_gases = @avb_u4_rare_upkeep
		}
	}
	
	triggered_desc = {
		text = job_bio_trophy_effect_desc
	}

	triggered_desc = {
		text = job_artisan_drone_effect_desc
	}

	triggered_desc = {
		text = job_maintenance_drone_effect_desc
	}
	prerequisites = { "tech_avb_residence_3" }
	
	show_tech_unlock_if = {
		owner = { has_valid_civic = civic_machine_servitor }
	}
	
	upgrades = {
		"building_avb_organic_sanctuary_4"
	}
	#science
	ai_resource_production = {
		unity = 30
		physics_research = 30

		trigger = {
			has_unemployed_pop_of_category = bio_trophy

			planet_resource_compare = {
				resource = physics_research
				value >= 100
				type = produces
			}
		}
	}

	#alloys
	ai_resource_production = {
		unity = 30
		alloys = 30

		trigger = {
			has_unemployed_pop_of_category = bio_trophy

			planet_resource_compare = {
				resource = alloys
				value >= 100
				type = produces
			}
		}
	}

	#cgs
	ai_resource_production = {
		unity = 30
		consumer_goods = 30

		trigger = {
			has_unemployed_pop_of_category = bio_trophy

			planet_resource_compare = {
				resource = consumer_goods
				value >= 100
				type = produces
			}
		}
	}
}

building_avb_organic_sanctuary_4 = {
	base_buildtime = @avb_u5_time
	can_build = no
	category = unity

	potential = {
		exists = owner
		owner = { has_valid_civic = civic_machine_servitor }
	}

	destroy_trigger = {
		exists = owner
		NOT = { owner = { has_valid_civic = civic_machine_servitor } }
	}
	
	convert_to = {
		building_avb_residence_4
		building_avb_communal_housing_4
	}
		
	planet_modifier = {
		#planet_housing_add = 20
		job_bio_trophy_add = 40
		job_artisan_drone_add = 4
		job_maintenance_drone_add = 3
	}
	
	resources = {
		category = planet_buildings
		cost = {
			minerals = @avb_u5_minerals
			exotic_gases = @avb_u5_rare_cost
		}
		upkeep = {
			energy = @avb_u5_upkeep
			exotic_gases = @avb_u5_rare_upkeep
		}
	}
	triggered_desc = {
		text = job_bio_trophy_effect_desc
	}

	triggered_desc = {
		text = job_artisan_drone_effect_desc
	}

	triggered_desc = {
		text = job_maintenance_drone_effect_desc
	}
	prerequisites = { "tech_avb_residence_4" }
	
	show_tech_unlock_if = {
		owner = { has_valid_civic = civic_machine_servitor }
	}
	#science
	ai_resource_production = {
		unity = 40
		physics_research = 40

		trigger = {
			has_unemployed_pop_of_category = bio_trophy

			planet_resource_compare = {
				resource = physics_research
				value >= 100
				type = produces
			}
		}
	}

	#alloys
	ai_resource_production = {
		unity = 40
		alloys = 40

		trigger = {
			has_unemployed_pop_of_category = bio_trophy

			planet_resource_compare = {
				resource = alloys
				value >= 100
				type = produces
			}
		}
	}

	#cgs
	ai_resource_production = {
		unity = 40
		consumer_goods = 40

		trigger = {
			has_unemployed_pop_of_category = bio_trophy

			planet_resource_compare = {
				resource = consumer_goods
				value >= 100
				type = produces
			}
		}
	}
}
##################
# Unity boosters
##################

building_avb_autocurating_vault_2 = {
	base_buildtime = @b4_time

	icon = building_avb_unity_booster_5
	category = unity

	potential = {
		exists = owner
		NOT = { has_modifier = slave_colony }
		owner = {
			is_machine_empire = no		# see 'building_alpha_hub'
			is_megacorp = no			# see 'building_corporate_vault'
			is_spiritualist = no		# see 'building_citadel_of_faith'
			OR = {						# only Hive Minds may avoid effects and restrictions imposed by the 'make_spiritualist_1' Federation Perk
				is_hive_empire = yes
				has_make_spiritualist_perk = no
			}
		}
	}

	allow = {
		has_upgraded_capital_4 = yes
	}
	destroy_trigger = {
		exists = owner
		OR = {
			has_modifier = slave_colony
			owner = {
				OR = {
					is_machine_empire = yes
					is_spiritualist = yes
					is_megacorp = yes
				}
			}
		}
	}

	convert_to = {
		building_avb_citadel_of_faith_2
		building_avb_alpha_hub_2
		building_avb_corporate_vault_2
	}

	resources = {
		category = planet_buildings
		cost = {
			trigger = {
				has_ringworld_output_boost = no
			}
			minerals = @b3_minerals
			rare_crystals = @b3_rare_cost
		}
		cost = {
			trigger = {
				has_ringworld_output_boost = yes
			}
			minerals = 1200
			rare_crystals = 375
		}
		upkeep = {
			trigger = {
				has_ringworld_output_boost = no
			}
			energy = @b3_upkeep
			rare_crystals = @b3_rare_upkeep
		}
		upkeep = {
			trigger = {
				has_ringworld_output_boost = yes
			}
			energy = 8
			rare_crystals = 3
		}
	}

	country_modifier = {
		country_official_cap_add = 2
		country_unity_produces_mult = 0.1
	}

	triggered_planet_modifier = {
		potential = {
			has_ringworld_output_boost = yes
		}
		planet_administrators_unity_produces_add = 1
		planet_managers_unity_produces_add = 1
		planet_priests_unity_produces_add = 1
		planet_telepaths_unity_produces_add = 1
	}

	prerequisites = {
		"tech_avb_autocurating_vault_2"
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_gestalt = no }
		}
		modifier = {
			job_politician_add = 2
		}
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_gestalt = yes }
		}
		modifier = {
			job_evaluator_add = 4
		}
	}

	triggered_desc = {
		trigger = {
			exists = owner
			owner = { is_gestalt = no }
		}
		text = job_politician_effect_desc
	}

	triggered_desc = {
		trigger = {
			exists = owner
			owner = { is_gestalt = yes }
		}
		text = job_evaluator_effect_desc
	}
	show_tech_unlock_if = {
		is_machine_empire = no
		is_spiritualist = no
		is_megacorp = no
		OR = {
			is_hive_empire = yes
			has_make_spiritualist_perk = no
		}
	}
}

building_avb_citadel_of_faith_2 = {
	base_buildtime = @b2_time


	category = unity

	potential = {
		exists = owner
		owner = {
			OR = {
				is_spiritualist = yes
				AND = {
					is_gestalt = no
					has_make_spiritualist_perk = yes
				}
			}
		}
		NOT = { has_modifier = slave_colony }
	}

	allow = {
		has_upgraded_capital_4 = yes
	}
	destroy_trigger = {
		exists = owner
		OR = {
			owner = {
				OR = {
					AND = {
						is_spiritualist = no
						has_make_spiritualist_perk = no
					}
					is_gestalt = yes
				}
			}
			has_modifier = slave_colony
		}
	}

	convert_to = {
		building_avb_autocurating_vault_2
		building_avb_alpha_hub_2
		building_avb_corporate_vault_2
	}

	country_modifier = {
		country_official_cap_add = 2
		country_unity_produces_mult = 0.1
	}

	planet_modifier = {
		job_high_priest_add = 2
		pop_ethic_spiritualist_attraction_mult = 0.35
	}

	resources = {
		category = planet_buildings
		cost = {
			trigger = {
				has_ringworld_output_boost = no
			}
			minerals = @b3_minerals
			rare_crystals = @b3_rare_cost
		}
		cost = {
			trigger = {
				has_ringworld_output_boost = yes
			}
			minerals = 1200
			rare_crystals = 375
		}
		upkeep = {
			trigger = {
				has_ringworld_output_boost = no
			}
			energy = @b3_upkeep
			rare_crystals = @b3_rare_upkeep
		}
		upkeep = {
			trigger = {
				has_ringworld_output_boost = yes
			}
			energy = 8
			rare_crystals = 3
		}
	}

	triggered_planet_modifier = {
		potential = {
			has_ringworld_output_boost = yes
		}
		planet_administrators_unity_produces_add = 1
		planet_managers_unity_produces_add = 1
		planet_priests_unity_produces_add = 1
		planet_telepaths_unity_produces_add = 1
	}

	prerequisites = {
		"tech_avb_transcendent_faith_2"
	}

	triggered_desc = {
		text = job_high_priest_effect_desc
	}
}

building_avb_corporate_vault_2 = {
	base_buildtime = @b3_time

	icon = building_avb_unity_booster_5

	category = unity

	potential = {
		exists = owner
		NOT = { has_modifier = slave_colony }
		owner = {
			is_megacorp = yes
			is_spiritualist = no
			has_make_spiritualist_perk = no
		}
	}

	allow = {
		has_upgraded_capital_4 = yes
	}
	destroy_trigger = {
		exists = owner
		OR = {
			has_modifier = slave_colony
			owner = {
				OR = {
					is_megacorp = no
					is_spiritualist = yes
					has_make_spiritualist_perk = yes
				}
			}
		}
	}

	convert_to = {
		building_avb_citadel_of_faith_2
		building_avb_autocurating_vault_2
		building_avb_alpha_hub_2
	}

	resources = {
		category = planet_buildings
		cost = {
			trigger = {
				has_ringworld_output_boost = no
			}
			minerals = @b3_minerals
			rare_crystals = @b3_rare_cost
		}
		cost = {
			trigger = {
				has_ringworld_output_boost = yes
			}
			minerals = 1200
			rare_crystals = 375
		}
		upkeep = {
			trigger = {
				has_ringworld_output_boost = no
			}
			energy = @b3_upkeep
			rare_crystals = @b3_rare_upkeep
		}
		upkeep = {
			trigger = {
				has_ringworld_output_boost = yes
			}
			energy = 8
			rare_crystals = 3
		}
	}

	country_modifier = {
		country_official_cap_add = 2
		country_unity_produces_mult = 0.1
	}

	triggered_planet_modifier = {
		potential = {
			has_ringworld_output_boost = yes
		}
		planet_administrators_unity_produces_add = 1
		planet_managers_unity_produces_add = 1
		planet_priests_unity_produces_add = 1
		planet_telepaths_unity_produces_add = 1
	}

	prerequisites = {
		"tech_avb_autocurating_vault_2"
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_megacorp = yes
				is_worker_coop_empire = no
			}
		}
		modifier = {
			job_executive_add = 2
		}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_megacorp = yes
				is_worker_coop_empire = yes
			}
		}
		modifier = {
			job_steward_add = 4
		}
	}

	triggered_desc = {
		trigger = {
			exists = owner
			owner = {
				is_megacorp = yes
				is_worker_coop_empire = no
			}
		}
		text = job_executive_effect_desc
	}

	triggered_desc = {
		trigger = {
			exists = owner
			owner = {
				is_megacorp = yes
				is_worker_coop_empire = yes
			}
		}
		text = job_steward_effect_desc
	}
	show_tech_unlock_if = {
		is_megacorp = yes
		is_spiritualist = no
		has_make_spiritualist_perk = no
	}
}
building_avb_league_offices_2 = {
	base_buildtime = @avb_f4_time

building_avb_alpha_hub_2 = {
	base_buildtime = @b3_time
	icon = building_avb_unity_booster_5
	category = unity

	potential = {
		exists = owner
		owner = { is_machine_empire = yes }
	}

	allow = {
		has_upgraded_capital_4 = yes
	}
	destroy_trigger = {
		exists = owner
		owner = { is_machine_empire = no }
	}

	convert_to = {
		building_avb_autocurating_vault_2
		building_avb_citadel_of_faith_2
		building_avb_corporate_vault_2
	}

	resources = {
		category = planet_buildings
		cost = {
			trigger = {
				has_ringworld_output_boost = no
			}
			minerals = @b3_minerals
			rare_crystals = @b3_rare_cost
		}
		cost = {
			trigger = {
				has_ringworld_output_boost = yes
			}
			minerals = 1200
			rare_crystals = 375
		}
		upkeep = {
			trigger = {
				has_ringworld_output_boost = no
			}
			energy = @b3_upkeep
			rare_crystals = @b3_rare_upkeep
		}
		upkeep = {
			trigger = {
				has_ringworld_output_boost = yes
			}
			energy = 8
			rare_crystals = 3
		}
	}

	country_modifier = {
		country_official_cap_add = 2
		country_unity_produces_mult = 0.1
	}

	planet_modifier = {
		job_evaluator_add = 4
	}

	triggered_desc = {
		text = job_evaluator_effect_desc
	}

	triggered_planet_modifier = {
		potential = {
			has_ringworld_output_boost = yes
		}
		custom_tooltip = "sm_ring_maintenance_hub_effect"
	}

	prerequisites = {
		"tech_avb_autocurating_vault_2"
	}

	show_tech_unlock_if = {
		is_machine_empire = yes
	}
}
building_avb_league_offices_2 = {
	base_buildtime = @avb_f4_time

	can_build = no
	category = unity

	potential = {
		exists = owner
		owner = { has_technology = tech_avb_league_offices_2 }
		NOT = { has_modifier = slave_colony }
	}

	allow = {
		has_upgraded_capital_4 = yes
	}

	destroy_trigger = {
		has_modifier = slave_colony
	}

	resources = {
		category = planet_buildings
		cost = {
			minerals = @avb_f4_minerals
			rare_crystals = @avb_f4_rare_cost
			minor_artifacts = 60
		}
		upkeep = {
			energy = @avb_f4_upkeep
			rare_crystals = @avb_f4_rare_upkeep
		}
	}

	country_modifier = {
		country_edict_fund_add = 100
	}

	triggered_country_modifier = {
		potential = {
			owner = { has_ascension_perk = ap_archaeoengineers }
		}
		country_edict_fund_add = 50
	}

	planet_modifier = {
		planet_administrators_unity_produces_add = 2
		planet_managers_unity_produces_add = 2
		planet_priests_unity_produces_add = 2
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_regular_empire = yes
				is_spiritualist = no
				is_megacorp = no
				is_worker_coop_empire = no
				has_make_spiritualist_perk = no
			}
		}
		modifier = {
			job_bureaucrat_add = 4
		}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				OR = {
					is_spiritualist = yes
					has_make_spiritualist_perk = yes
				}
			}
		}
		modifier = {
			job_priest_add = 4
		}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_megacorp = yes
				is_spiritualist = no
				has_make_spiritualist_perk = no
			}
		}
		modifier = {
			job_manager_add = 4
		}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_spiritualist = no
				has_make_spiritualist_perk = no
				is_worker_coop_empire = yes
			}
		}
		modifier = {
			job_steward_add = 4
		}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_megacorp = yes
				has_make_spiritualist_perk = no
				is_spiritualist = yes
			}
		}
		modifier = {
			job_manager_add = 2
			job_priest_add = 2
		}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_megacorp = yes
				is_worker_coop_empire = yes
				has_make_spiritualist_perk = no
				is_spiritualist = yes
			}
		}
		modifier = {
			job_steward_add = 2
			job_priest_add = 2
		}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_hive_empire = yes }
		}
		modifier = {
			job_synapse_drone_add = 4
		}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_machine_empire = yes }
		}
		modifier = {
			job_coordinator_add = 4
		}
	}

	triggered_desc = {
		text = building_league_offices_effect
	}

	triggered_desc = {
		trigger = {
			exists = owner
			owner = {
				is_regular_empire = yes
				is_spiritualist = no
				is_megacorp = no
				is_worker_coop_empire = no
				has_make_spiritualist_perk = no
			}
		}
		text = job_bureaucrat_effect_desc
	}

	triggered_desc = {
		trigger = {
			exists = owner
			owner = {
				OR = {
					is_spiritualist = yes
					has_make_spiritualist_perk = yes
				}
			}
		}
		text = job_priest_effect_desc
	}

	triggered_desc = {
		trigger = {
			exists = owner
			owner = {
				is_megacorp = yes
				is_worker_coop_empire = no
				has_make_spiritualist_perk = no
			}
		}
		text = job_manager_effect_desc
	}

	triggered_desc = {
		trigger = {
			exists = owner
			owner = {
				is_worker_coop_empire = yes
				has_make_spiritualist_perk = no
			}
		}
		text = job_steward_effect_desc
	}

	triggered_desc = {
		trigger = {
			exists = owner
			owner = { is_machine_empire = yes }
		}
		text = job_coordinator_effect_desc
	}

	triggered_desc = {
		trigger = {
			exists = owner
			owner = { is_hive_empire = yes }
		}
		text = job_synapse_drone_effect_desc
	}
	prerequisites = {
		"tech_avb_league_offices_2"
	}
}